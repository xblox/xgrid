//>>built
require({cache:{"xgrid/main":function(){define("dojo/_base/kernel xide/data/ObservableStore xide/data/Reference xide/data/Source xgrid/Actions xgrid/Base xgrid/Clipboard xgrid/ColumnHider xgrid/ContextMenu xgrid/Defaults xgrid/DnD xgrid/Focus xgrid/Grid xgrid/Keyboard xgrid/KeyboardNavigation xgrid/Layout xgrid/ListRenderer xgrid/MultiRenderer xgrid/Renderer xgrid/Search xgrid/ThumbRenderer xgrid/component xgrid/Toolbar xgrid/TreeRenderer xgrid/types".split(" "),function(g){return g.xgrid})},"xgrid/Actions":function(){define(["xdojo/declare",
"xide/types","xaction/ActionProvider","xaction/DefaultActions"],function(g,h,k,m){var e={_ActionContextState:null,onActivateActionContext:function(c,b){},onDeactivateActionContext:function(c,b){},onBeforeAction:function(c){},onAfterAction:function(c,b){c=this.getAction(c);if(null!=b&&_.isObject(b)){var d=b.select,a=b.focus||!0;if(d)return this.select(d,null,!0,{append:b.append,focus:a,delay:b.delay||1,expand:b.expand})}this._emit(h.EVENTS.ON_AFTER_ACTION,c)},hasPermission:function(c){return m.hasAction(this.permissions,
c)},addAction:function(c,b){if(b.keyCombo&&_.isArray(b.keyCombo)&&-1!=b.keyCombo.indexOf("dblclick")){var d=this;this.on("dblclick",function(a){(a=d.row(a))&&d.runAction(b,a.data)})}return this.inherited(arguments)},_onSelectionChanged:function(c){this.inherited(arguments);this.refreshActions()},updateActions:function(c,b){var d,a=this.getSelection();c&&b&&(d=c.getItemActions(),d=this._filterActions(a,d,c),b.setItemActions({},d))},startup:function(){if(!this._started){var c=this;c.domNode.tabIndex=
-1;this.on("contextmenu",function(b){b&&b.target&&$(b.target).hasClass("dgrid-content")&&(c.select([],null,!1),c.deselectAll(),"contextmenu"!==b.type&&setTimeout(function(){c.domNode.focus();document.activeElement=c.domNode;$(c.domNode).focus()},1))}.bind(this));this._on("selectionChanged",function(b){this._onSelectionChanged(b)}.bind(this));this._on("onAddActions",function(b){b=b.actions;var d=h.ACTION.HEADER;c.getAction(d)||b.push(c.createAction({label:"Header",command:d,icon:"fa-hdd-o",tab:"View",
group:"Show",mixin:{actionType:"multiToggle"},onCreate:function(a){a.set("value",c.showHeader)},onChange:function(a,b){c._setShowHeader(b);c.showHeader=b;c.onAfterAction(h.ACTION.HEADER)}}))});return this.inherited(arguments)}}};g=g("xgrid.Actions",k,e);g.Implementation=e;return g})},"xgrid/Base":function(){define("xdojo/declare xide/types xgrid/types xide/utils/ObjectUtils xide/utils dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/ThumbRenderer xgrid/TreeRenderer dgrid/util/misc".split(" "),
function(g,h,k,m,e,c,b,d,a,f,t,q,l){function x(a,b,f,c){return g.classFactory(a,b,f,c,w)}function u(a,b){return b.some(function(b){return 0<=a.indexOf(b)})}function n(a,b,f,c,C,d){var q=!1;b=b||z;if(!b&&!f)return z;b&&(q=u(v,_.keys(c)),d=e.cloneKeys(d||w),q&&(e.mixin(d,c),d=_.pick(d,_.identity)),b=x(a,d,[z],b));c=[];q={};if(b&&f){d=e.cloneKeys(p);e.mixin(d,f);for(var t in d)if(f=d[t],d[t]){var l=null;!0===f?l=p[t]:p[t]?(l=p[t],l=u(["CLASS","CLASSES","IMPLEMENTATION"],_.keys(f))?e.mixin(e.cloneKeys(l),
f):l):l=f;l&&(f=x(t,l.CLASSES||[],[l.CLASS],l.IMPLEMENTATION),c.push(f),q[t]=f)}0<c.length&&(b=x(a,[b],c,C));b.prototype._featureMap=q}return b}var v="EVENTED GRID EDITOR RENDERER DEFAULTS LAYOUT FOCUS i18".split(" "),p=h.DEFAULT_GRID_FEATURES,w=h.GRID_BASES;k=h.DEFAULT_GRID_OPTIONS;var z=g("xgrid.Default",null,{_isHighlighting:!1,_featureMap:{},isRendered:function(a){a=this._normalize(a);var b=this.collection;if(a){a=a.data;var b=b.idProperty,f=this.getRows(!0);if(f)for(var d=0;d<f.length;d++){var c=
this.row(f[d]);if(c&&c.data&&c.data&&a&&c.data[b]===a[b])return!0}}return!1},highlightRow:function(){},getParent:function(){return this._parent},get:function(a){var b=this.getParent();return"iconClass"===a&&b&&b.icon?b.icon():this.inherited(arguments)},set:function(a,b){var f=this.getParent();if("iconClass"===a){var d=f.set;if(d)d.apply(f,[a,b]);else if(f&&f.icon)return f.icon(b),!0}"title"===a&&b&&f&&((d=f.set)?d.apply(f,[a,b]):f&&f.title&&f.title(b));if("loading"===a&&f&&f){if(f.startLoading)return d=
f._options.icon,!0===b?(f.startLoading("",.5),f.icon("fa-spinner fa-spin")):(f.finishLoading(),f.icon(d)),!0;f.set&&f.set("loading",b)}return this.inherited(arguments)},runAction:function(a){a.command==h.ACTION.HEADER&&this._setShowHeader(!this.showHeader);return this.inherited(arguments)},highlight:function(a){var b=$(this.domNode.parentNode);a?this._isHighlighting||(this._isHighlighting=!0,b.addClass("highlight")):(this._isHighlighting=!1,b.removeClass("highlight"))},getState:function(a){a=this.inherited(arguments)||
{};a.showHeader=this.showHeader;return a},postMixInProperties:function(){var a=this.state;a&&(this.showHeader=a.showHeader);return this.inherited(arguments)},renderArray:function(a){this._lastData=a;return this.inherited(arguments)},getData:function(){return this._lastData},refreshItem:function(a,b){b&&(this._muteSelectionEvents=!0);this.collection.emit("update",{target:a});b&&(this._muteSelectionEvents=!1)},onShow:function(){this._emit(h.EVENTS.ON_VIEW_SHOW,this);return this.inherited(arguments)},
isActive:function(a){return e.isDescendant(this.domNode,a||document.activeElement)},_showHeader:function(a){$(this.domNode).find(".dgrid-header").each(function(b,f){$(f).css("display",a?"":"none")});$(this.domNode).find(".dgrid-scroller").each(function(b,f){$(f).css("margin-top",a?26:0)})},destroy:function(){this._emit("destroy",this);return this.inherited(arguments)},hasFeature:function(a){return u(["name"],_.keys(this._featureMap))},getRows:function(a,b){var f=[],d=this,c=$(d.domNode).find(".dgrid-row");
_.each(c,function(b){(b=d.row(b))&&b.element&&f.push(b[a?"element":"data"])});return b?f.filter(b):f},startup:function(){var a=this.inherited(arguments);this.columns&&_.each(this.columns,function(a){a.width&&this.styleColumn(parseInt(a.id),"width:"+a.width)},this);var b=this;this.showExtraSpace&&this.on("dgrid-refresh-complete",function(){if(b.getRows().length){var a=$(b.contentNode).find(".dgrid-extra");a.length||(a=$('\x3cdiv class\x3d"dgrid-extra" style\x3d"width:100%;height:80px"\x3e\x3c/div\x3e'),
$(b.contentNode).append(a),a.on("click",function(){b.deselectAll()}),a.on("contextmenu",function(){b.deselectAll()}))}});return a}});m=n("xgrid/Base",{options:e.clone(k)},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,COLUMN_HIDER:!1},null,{});m.createGridClass=n;m.classFactory=x;m.DEFAULT_GRID_FEATURES=p;m.DEFAULT_GRID_BASES=w;m.DEFAULT_GRID_OPTIONS=k;m.DEFAULT_GRID_OPTION_KEYS=h.DEFAULT_GRID_OPTION_KEYS;return m})},"xgrid/types":function(){define("xdojo/declare xide/types xgrid/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/extensions/Pagination xgrid/Selection xgrid/Toolbar xgrid/ContextMenu xgrid/Keyboard xide/mixins/EventedMixin dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/Clipboard xgrid/Actions xlang/i18".split(" "),
function(g,h,k,m,e,c,b,d,a,f,t,q,l,x,u,n,v,p,w){h.GRID_BASES={GRID:q,LAYOUT:x,DEFAULTS:l,RENDERER:n,EVENTED:t,FOCUS:u,i18:w};h.DEFAULT_GRID_OPTIONS={USE_JQUERY_CSS:!0,DESELECT_SELECTED:!0,CLEAR_SELECTION_ON_CLICK:!0,ITEM_ACTIONS:{},GRID_ACTIONS:{},PUBLISH_SELECTION:!1};h.GRID_OPTION={USE_JQUERY_CSS:"USE_JQUERY_CSS",DESELECT_SELECTED:"DESELECT_SELECTED",CLEAR_SELECTION_ON_CLICK:"CLEAR_SELECTION_ON_CLICK",ITEM_ACTIONS:"ITEM_ACTIONS",GRID_ACTIONS:"GRID_ACTIONS"};h.DEFAULT_GRID_FEATURES={SELECTION:{CLASS:b,
IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:f,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:k,IMPLEMENTATION:{},CLASSES:null},COLUMN_REORDER:{CLASS:m,IMPLEMENTATION:{},CLASSES:null},COLUMN_RESIZER:{CLASS:e,IMPLEMENTATION:{},CLASSES:null}};h.GRID_FEATURES={SELECTION:{CLASS:b,IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:f,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:k,IMPLEMENTATION:{},CLASSES:null},COLUMN_REORDER:{CLASS:m,IMPLEMENTATION:{},CLASSES:null},COLUMN_RESIZER:{CLASS:e,
IMPLEMENTATION:{},CLASSES:null},PAGINATION:{CLASS:c,IMPLEMENTATION:{},CLASSES:null},TOOLBAR:{CLASS:d,IMPLEMENTATION:{},CLASSES:null},CONTEXT_MENU:{CLASS:a,IMPLEMENTATION:{},CLASSES:null},ACTIONS:{CLASS:p,IMPLEMENTATION:{},CLASSES:null},CLIPBOARD:{CLASS:v,IMPLEMENTATION:{},CLASSES:null}};return g(null,[],{})})},"xgrid/ColumnHider":function(){define(["xdojo/declare","dojo/has","dgrid/util/misc","xide/types","xide/utils"],function(g,h,k,m,e){return g("xgrid.ColumnHider",null,{columnHiderActionRootCommand:"View/Columns",
i18nColumnHider:{},_columnHiderRules:null,_runAction:function(c,b,d){if(c&&-1!=c.command.indexOf(this.columnHiderActionRootCommand)){var a=c.column,f=this.isColumnHidden(a.id);this.showColumn(a.id,f);!1!==b&&c.set("value",!this.isColumnHidden(a.id))}return this.inherited(arguments)},getColumnHiderActions:function(c,b){function d(b){var d="Show "+(b.label||b.field||""),q=b.icon||"fa-cogs";if(!b.unhidable){var g=f.createAction(d,a+"/"+d,q,null,"View","Columns","item|view",function(a){var f={widgetArgs:{checked:!b.hidden,
iconClass:q,style:"float:inherit;"},actionType:"multiToggle"};a.actionType="multiToggle";a.setVisibility(m.ACTION_VISIBILITY_ALL,e.cloneKeys(f,!1));d=a.label.replace("Show ","")},null,{column:b,filterGroup:"item|view",tab:"View",value:!b.hidden,addPermission:!0},null,null,c,l,f,f);g&&t.push(g)}}var a=this.columnHiderActionRootCommand,f=this,t=[],q=m.ACTION_VISIBILITY,l=this.domNode;b=b||[];_.find(b,{command:a})||t.push(this.createAction({label:"Columns",command:a,icon:"fa-columns",tab:"View",group:"Columns",
toggleGroup:f.id+"Columns",onCreate:function(a){a.setVisibility(q.RIBBON,{expand:!0}).setVisibility(q.ACTION_TOOLBAR,!1)}}));var g=this.subRows,h=!0,n,k,p,w;p=0;for(n=g.length;p<n;p++)for(w=0,k=g[p].length;w<k;w++)d(g[p][w]),h&&(h=!1);return t},resize:function(){this.inherited(arguments);this._checkHiddenColumns()},_checkHiddenColumns:function(){var c=this.subRows,b,d,a,f,t=$(this.domNode).width();a=0;for(b=c.length;a<b;a++)for(f=0,d=c[a].length;f<d;f++){var q=c[a][f];q.minWidth&&(t<q.minWidth?q.unhidable||
this.showColumn(q.id,!1):this.showColumn(q.id,!0))}},startup:function(){if(!this._started){this._columnHiderCheckboxes={};this._columnHiderRules={};var c=this.inherited(arguments);this._checkHiddenColumns();var b=this.subRows,d,a,f,t,q=this;f=0;for(d=b.length;f<d;f++)for(t=0,a=b[f].length;t<a;t++){var l=b[f][t],e=l.id;!0===l.hidden&&(l.hidden=!1,q._hideColumn(e),l.hidden=!0)}if(this.getActionStore)this.getActionStore().on("update",function(a){a=a.target;-1!==a.command.indexOf("View/Columns")&&(q.showColumn(a.column.id,
a.get("value")),q.onAfterAction(a))});return c}},left:function(c,b){return this.right(c,-b)},right:function(c,b){c.element||(c=this.cell(c));for(var d=this.inherited(arguments),a=c;d.column.hidden;){d=this.inherited(arguments,[d,0<b?1:-1]);if(a.element===d.element)return c;a=d}return d},isColumnHidden:function(c){return!!this._columnHiderRules[c]},_hideColumn:function(c){var b=this,d="#"+k.escapeCssIdentifier(this.template?this.template.id:this.domNode.id)+" .dgrid-column-",a;this._columnHiderRules[c]||
(this._columnHiderRules[c]=k.addCssRule(d+k.escapeCssIdentifier(c,"-"),"display: none;"),8!==h("ie")&&10!==h("ie"))||(a=k.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){a.remove();b.resize()},0))},_showColumn:function(c){this._columnHiderRules[c]&&(this._columnHiderRules[c].remove(),delete this._columnHiderRules[c])},showColumn:function(c,b){this.isColumnHidden(c)?b&&this._showColumn(c):b||this._hideColumn(c)}})})},"xgrid/Selection":function(){define("xdojo/declare xide/types xide/utils dgrid/Selection dojo/dom-class dojo/on dojo/Deferred".split(" "),
function(g,h,k,m,e,c,b){var d={_lastSelection:null,_lastFocused:null,_refreshInProgress:null,_muteSelectionEvents:!0,selectAll:function(a){this.select(this.getRows(a),null,!0,{append:!1,delay:1})},setState:function(a){a&&a.selection&&a.selection.selection&&this.select(a.selection.selection,null,!0,{expand:!0,append:!1,scrollInto:!0},"restore");return this.inherited(arguments)},getState:function(a){a=this.inherited(arguments)||{};var b=this._preserveSelection(),d={selection:[]},c=this.collection.idProperty;
b.selection&&c&&_.each(b.selection,function(a){a&&a[c]&&d.selection.push(a[c])});b.focused&&(d.focused=b.focused.path);a.selection=d;return a},refresh:function(a){if(this._refreshInProgress)return this._refreshInProgress;var b=!1!==a?this._preserveSelection():null,d=this,c=this.isActive(),l=this.inherited(arguments);(this._refreshInProgress=l)&&l.then&&l.then(function(){d._refreshInProgress=null;c&&b&&d._restoreSelection(b,1,!c,"restore")});return l},_normalize:function(a){if(!a)return null;a.element||
(a=this.cell(a));a&&a.row&&(a=a.row);return a},deselectAll:function(){this._lastSelection&&(this.clearSelection(),this._lastFocused=this._lastSelection=null,$(this.domNode).find(".dgrid-focus").each(function(a,b){$(b).removeClass("dgrid-focus")}),this._emit("selectionChanged",{selection:[],why:"clear",source:"code"}))},invertSelection:function(a){var b=a||this.getSelection()||[],d=[];a=this.getRows();_.each(a,function(a){-1===b.indexOf(a)&&d.push(a)});return this.select(d,null,!0,{append:!1})},runAction:function(a){_.isString(a)&&
(a=this.getActionStore().getSync(a));return"File/Select/None"===a.command?(this.deselectAll(),!0):"File/Select/All"===a.command?(this.selectAll(),!0):"File/Select/Invert"===a.command?this.invertSelection():this.inherited(arguments)},_preserveSelection:function(){this.__lastSelection=this.getSelection();this._lastFocused=this.getFocused();return{selection:this.getSelection(),focused:this.getFocused()}},_restoreSelection:function(a,b,d,c){var l=a?a.focused:this._lastFocused;a=a?a.selection:this.__lastSelection;
if(_.isEmpty(a))this._lastFocused=null;else return b=this.select(a,null,!0,{silent:null!=d?d:!0,append:!1,delay:null!=b?b:0},c),l&&this.isActive()&&this.focus(this.row(l)),b},getPrevious:function(a,b,d){a=a||this.getFocused(b);a=this._normalize(a);var c=this.cell(this._move(a,-1,"dgrid-row"));if(c&&c.row&&(c=c.row[b?"element":"data"],!0===d&&this.isSelected(c))){if(a&&a.data&&a.data==c)return null;if(a=this.getPrevious(c,b,d))return a}return c},getNext:function(a,b,d){a=a||this.getFocused(b);a=this._normalize(a);
var c=this.cell(this._move(a,1,"dgrid-row"));if(c&&c.row&&(c=c.row[b?"element":"data"],!0===d&&this.isSelected(c))){if(a&&a.data&&a.data==c)return null;if(a=this.getNext(c,b,d))return a}return c},getSelection:function(a){var b=[];if(this.collection){for(var d in this.selection){var c=this.collection.getSync(d);c&&b.push(c)}if(a)return b.filter(a)}return b},getSelectedItem:function(a){a=this.getSelection(a);return 1==a.length?a[0]:null},postCreate:function(){function a(a){var b=[];a&&a.rows&&a.rows.forEach(function(a){b.push(a.id)});
return b}function b(a){return _.all(a,function(b){return b.length==a[0].length&&0==_.difference(b,a[0]).length})}var d=this;if(!0===this.options[h.GRID_OPTION.CLEAR_SELECTION_ON_CLICK]){var c=function(a){a&&a.target&&e.contains(a.target,"dgrid-content")&&this.deselectAll()}.bind(this);this.on("click",function(a){c(a)}.bind(this))}this.on("dgrid-select",function(c){var e=a(d._lastSelection),q=a(c);b([e,q])||(d._lastSelection=c,d._emit("selectionChanged",{selection:d.getSelection(),why:"select",source:c.parentType}))});
return this.inherited(arguments)},_fireSelectionEvents:function(){if(!0!==this._muteSelectionEvents)return this.inherited(arguments)},__lastLast:null,__lastFirst:null,__select:function(a,b,d,c,e){_.each(a,function(a){a&&(a=this.row(a))&&this._select(a,b,d)},this);c&&c.resolve(a);this._muteSelectionEvents=!1;this._fireSelectionEvents();if((c=this.getRows())&&c.length&&a&&a.length&&d&&e&&"mouse"!==e){e=a[a.length-1];if(c[c.length-1]==e){if(this.__lastLast&&this.__lastLast==e){this._emit("bounced",{direction:1,
item:e});return}this.__lastLast=e}else this.__lastLast=null;a=a[0];c[0]==a?this.__lastFirst&&this.__lastFirst==a?this._emit("bounced",{direction:-1,item:a}):this.__lastFirst=a:this.__lastFirst=null}else this.__lastFirst=null},select:function(a,c,d,e,g){function h(){var a=(r?r.map(function(a){return a?a.data||a:{}}):[]).map(function(a){return a[z]}),b=B.map(function(a){return a[z]});return a.join(",")===b.join(",")}function m(){$(p.domNode).find(".dgrid-focus").each(function(a,b){$(b).removeClass("dgrid-focus")})}
clearTimeout(this._selectTimer);delete this._selectTimer;var n="mouse"===g;this.isActive();var v=new b;g=g||"";e=e||{};n&&(e.focus=!0);d=null===d?!0:d;var n=e.delay||0,p=this,w=this.collection,z=w.idProperty;!0===e.silent&&(p._muteSelectionEvents=!0);var r=k.isArray(a)?a:[a];if(!_.isEmpty(r)){var y=[];if(_.isNumber(r[0])){var A=p.getRows();_.each(r,function(a){y.push(A[a])});r=y}else _.isString(r[0])?(_.each(r,function(a){(a=w.getSync(a))&&y.push(a)}),r=y):r&&r[0]&&r[0].tagName&&(_.each(r,function(a){y.push(p.row(a).data)}),
r=y);if(!r.length)return v.resolve(),v;var B=(this._lastSelection?this._lastSelection.rows:[]).map(function(a){return a.data});a=h();"update"===g&&d&&(e.focus=!0,e.append=!1,e.delay=1);"dgrid-cellfocusin"===g&&(e.focus=!0);!1===e.append&&d&&!a&&(p.clearSelection(r),m());if(!a||"update"!==g&&"dgrid-cellfocusin"!==g)return!0===e.focus&&e.expand&&(p.isRendered(r[0])||p._expandTo(r[0])),e.expand&&(p.isRendered(r[0])||p._expandTo(r[0])),e.scrollInto&&(a=this.row(r[0]),a.element&&a.element.scrollIntoView()),
n&&r.length?this._selectTimer=setTimeout(function(){!p.destroyed&&p.collection&&(!1===e.append&&p.clearSelection(),m(),p.focus(r[0],!1),p.__select(r,c,d,v,g))},n):p.__select(r,c,d,v,g),v;e.focus&&(m(),p.focus(r[0]))}},_setLast:function(a,b,d){b=[];for(d=0;d<a.length;d++)b.push(this.collection.getIdentity(a[d]))},isExpanded:function(a){a=this._normalize("root");return!!this._expanded[a.id]},_expandTo:function(a){if(a){var b=this.collection;_.isString(a)&&(a=b.getSync(a));if(b=b.getSync(a[b.parentField])||
a.getParent?a.getParent():null)this.isRendered(b)?(this.isExpanded(b)||this.expand(b,!0,!0),this.isExpanded(a)||this.expand(a,!0,!0)):this._expandTo(b)}},startup:function(){this.inherited(arguments);var a=this;this.getSelection&&(this._listeners=this._listeners||[],this._listeners.push(c(a.domNode,"keyup",function(b){if(!b.metaKey&&!b.altKey){var d=a.keyMap[b.keyCode],c;if(c=d)c=!(b.target.type&&32===b.keyCode);c&&0==a.getSelection().length&&d.call(a,b)}})))}};g=g("xgrid.Selection",m,d);g.Implementation=
d;return g})},"xgrid/Toolbar":function(){define(["xdojo/declare","xide/utils","xide/types","xide/widgets/ActionToolbar"],function(g,h,k,m){var e={_toolbar:null,toolbarInitiallyHidden:!1,runAction:function(c){return c.command==k.ACTION.TOOLBAR?(this.showToolbar(null==this._toolbar),!0):this.inherited(arguments)},getToolbar:function(){return this._toolbar},showToolbar:function(c,b,d,a){null==c&&(c=null==this._toolbar);c&&!this._toolbar&&(b=h.addWidget(b||m,{style:"min-height:30px;height:auto;width:100%"},
this,d||this.header,!0),!1!==a&&(b.addActionEmitter(this),b.setActionEmitter(this),this.refreshActions&&this.refreshActions()),this._toolbar=b,this.add&&this.add(b),this._emit("showToolbar",b));!c&&this._toolbar&&(h.destroy(this._toolbar,!0,this),$(d||this.header).css("height","auto"));this.resize();return this._toolbar},getState:function(c){c=this.inherited(arguments)||{};c.toolbar=null!==this._toolbar;return c},setState:function(c){c&&c.toolbar&&this.showToolbar(c.toolbar);return this.inherited(arguments)},
startup:function(){var c=this;this._started||(this._on("onAddActions",function(b){var d=b.actions,a=k.ACTION.TOOLBAR;!b.store.getSync(a)&&this.hasPermission(a)&&d.push(c.createAction({label:"Toolbar",command:a,icon:k.ACTION_ICON.TOOLBAR,tab:"View",group:"Show",keycombo:["ctrl b"],mixin:{actionType:"multiToggle",value:!1,id:h.createUUID()},onCreate:function(a){a.set("value",null!==c._toolbar)},onChange:function(a,b){c.showToolbar(b);c.onAfterAction(k.ACTION.TOOLBAR)}}))}),this.inherited(arguments),
this.showToolbar(!this.toolbarInitiallyHidden))}};g=g("xgrid.Toolbar",null,e);g.Implementation=e;return g})},"xgrid/ContextMenu":function(){define(["dojo/_base/declare","xide/utils","xide/widgets/ContextMenu","xide/types"],function(g,h,k,m){return g("xgrid.ContextMenu",null,{contextMenu:null,getContextMenu:function(){return this.contextMenu},_createContextMenu:function(){var e=this.contextMenuArgs||{};h.mixin(e,{owner:this,delegate:this});var c=this.contentNode,e=new k(e,c);e.openTarget=c;e.init({preventDoubleContext:!1});
e._registerActionEmitter(this);this.contextMenu=e;this.add?this.add(e):console.error("have no add!")},startup:function(){this._started||(this.inherited(arguments),this.hasPermission(m.ACTION.CONTEXT_MENU)&&this._createContextMenu())}})})},"xgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/dom-class dojo/on dojo/_base/lang dojo/has dgrid/util/misc dojo/_base/sniff".split(" "),function(g,h,k,m,e,c,b){function d(a){a.preventDefault()}var a={checkbox:1,radio:1,button:1},f=/\bdgrid-cell\b/,
t=/\bdgrid-row\b/;c.add("dom-contains",function(a,b,d){return!!d.contains});var q=function(a,b,d){function c(a,b){return a[b+"All"]("[id]:not(.ui-state-disabled):not(.dgrid-content-parent):first")}d=0>d;var f,e;a=b.row(a).element;a=$(a);if(a.length)if(f=b.up(b._focusedNode,1,!0),f=$(f.element),f.length)if(b=a.position().top,e=a.position().left,f=a,d){do f=f.prev("[id]");while(f.length&&!(f.position().top<b&&f.position().left<=e));f.is(".ui-state-disabled")&&(f=c(f,"next"))}else{do f=f.next("[id]");
while(f.length&&!(f.position().top>b&&f.position().left>=e));f.is(".ui-state-disabled")&&(f=c(f,"prev"))}else f=a;return f},l=g(null,{pageSkip:10,tabIndex:-1,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);this.keyMap||(this.keyMap=e.mixin({},l.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=e.mixin({},l.defaultHeaderKeyMap))},postCreate:function(){function d(b){var c=b.target;return c.type&&(!a[c.type]||32===b.keyCode)}function c(a){function g(){e._focusedHeaderNode&&
(e._focusedHeaderNode.tabIndex=-1);if(e.showHeader){if(l)for(var a=e.headerNode.getElementsByTagName("th"),b=0,d;d=a[b];++b){if(n.test(d.className)){e._focusedHeaderNode=k=d;break}}else e._focusedHeaderNode=k=e.headerNode;k&&(k.tabIndex=e.tabIndex)}}var l=e.cellNavigation,n=l?f:t,q=a===e.headerNode,k=a;q?(g(),h.after(e,"renderHeader",g,!0)):h.after(e,"renderArray",function(d){var c=e._focusedNode||k;if(n.test(c.className)&&b.contains(a,c))return d;for(var f=a.getElementsByTagName("*"),g=0,C;C=f[g];++g)if(n.test(C.className)){c=
e._focusedNode=C;break}c.tabIndex=e.tabIndex;return d});e._listeners.push(m(a,"mousedown",function(a){d(a)||e._focusOnNode(a.target,q,a)}));e._listeners.push(m(a,"keydown",function(a){if(!a.metaKey&&!a.altKey){var b=e[q?"headerKeyMap":"keyMap"][a.keyCode];b&&!d(a)&&b.call(e,a)}}))}this.inherited(arguments);var e=this;this.tabableHeader&&(c(this.headerNode),m(this.headerNode,"dgrid-cellfocusin",function(){e.scrollTo({x:this.scrollLeft})}));c(this.contentNode);this._debouncedEnsureScroll=b.debounce(this._ensureScroll,
this)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);var b=this,d=document.activeElement===this._focusedNode,c=this[this.cellNavigation?"cell":"row"](this._focusedNode);if(!c)return console.error("no focus target"),this.inherited(arguments);var f=c.row||c,e;a=a.element||a;a===f.element&&((e=this.down(f,!0))&&e.element!==a||(e=this.up(f,!0)),this._removedFocus={active:d,rowId:f.id,columnId:c.column&&c.column.id,siblingId:e&&e.element!==a?e.id:void 0},setTimeout(function(){b._removedFocus&&
b._restoreFocus(f.id)},0),this._focusedNode=null);this.inherited(arguments)},insertRow:function(){var a=this.inherited(arguments);this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(a);return a},_restoreFocus:function(a){var b=this._removedFocus,d;if((a=(a=a&&this.row(a))&&a.element&&a.id===b.rowId?a:"undefined"!==typeof b.siblingId&&this.row(b.siblingId))&&a.element){if(!a.element.parentNode.parentNode){b.wait=!0;return}"undefined"!==typeof b.columnId&&(d=this.cell(a,b.columnId))&&d.element&&
(a=d);b.active&&0!==a.element.offsetHeight?this._focusOnNode(a,!1,null):(k.add(a.element,"dgrid-focus"),a.element.tabIndex=this.tabIndex,this._focusedNode=a.element)}delete this._removedFocus},addKeyHandler:function(a,b,d){return h.after(this[d?"headerKeyMap":"keyMap"],a,b,!0)},_ensureRowScroll:function(a){var b=this.getScrollPosition().y;b>a.offsetTop?this.scrollTo({y:a.offsetTop}):b+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+
a.offsetHeight})},_ensureColumnScroll:function(a){var b=this.getScrollPosition().x,d=a.offsetLeft;if(b>d)this.scrollTo({x:d});else{var c=this.bodyNode.clientWidth;a=a.offsetWidth;var f=d+a;b+c<f&&this.scrollTo({x:c>a?f-c:d})}},_ensureScroll:function(a,b){this.cellNavigation&&(this.columnSets||1<this.subRows.length)&&!b&&this._ensureRowScroll(a.row.element);this.bodyNode.clientWidth<this.contentNode.offsetWidth&&this._ensureColumnScroll(a.element)},_focusOnNode:function(a,b,d,c){var g="_focused"+(b?
"Header":"")+"Node",l=this[g],h=this.cellNavigation?"cell":"row",n=this[h](a),q,r,p,v,x;if(a=n&&n.element){if(this.cellNavigation)for(q=a.getElementsByTagName("input"),x=0,p=q.length;x<p;x++)if(r=q[x],(-1!==r.tabIndex||"_dgridLastValue"in r)&&!r.disabled){r.focus();v=!0;break}null!==d&&(d=e.mixin({grid:this},d),d.type&&(d.parentType=d.type),d.bubbles||(d.bubbles=!0));l&&(k.remove(l,"dgrid-focus"),l.removeAttribute("tabindex"),d&&(d[h]=this[h](l),m.emit(l,"dgrid-cellfocusout",d)));l=this[g]=a;d&&(d[h]=
n);g=this.cellNavigation?f:t;!v&&g.test(a.className)&&(a.tabIndex=this.tabIndex,a.focus());k.add(a,"dgrid-focus");d&&!1!==c&&m.emit(l,"dgrid-cellfocusin",d);this._debouncedEnsureScroll(n,b)}},focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a,b){var d=a||this._focusedNode;d?this._focusOnNode(d,!1,null,b):this.contentNode.focus()}}),x=l.moveFocusVertical=function(a,b){if(this.isThumbGrid){var d=q(a,this,b);if(d&&d.length){this._focusOnNode(d[0],!1,a);a.preventDefault();
return}}var c=this.cellNavigation,d=this[c?"cell":"row"](a),f=c&&d.column.id,d=this.down(this._focusedNode,b,!0);c&&(d=this.cell(d,f));this._focusOnNode(d,!1,a);a.preventDefault()};g=l.moveFocusUp=function(a){x.call(this,a,-1)};var u=l.moveFocusDown=function(a){x.call(this,a,1)},n=l.moveFocusPageUp=function(a){x.call(this,a,-this.pageSkip)},v=l.moveFocusPageDown=function(a){x.call(this,a,this.pageSkip)},p=l.moveFocusHorizontal=function(a,b){if(this.cellNavigation||!0===this.isThumbGrid){var d=!this.row(a),
c=this["_focused"+(d?"Header":"")+"Node"];1==this.isThumbGrid?(d=this.down(this._focusedNode,b,!0),this._focusOnNode(d,!1,a)):this._focusOnNode(this.right(c,b),d,a);a.preventDefault()}},w=l.moveFocusLeft=function(a){p.call(this,a,-1)},z=l.moveFocusRight=function(a){p.call(this,a,1)},r=l.moveHeaderFocusEnd=function(a,b){var d;this.cellNavigation&&(d=this.headerNode.getElementsByTagName("th"),this._focusOnNode(d[b?0:d.length-1],!0,a));a.preventDefault()},y=l.moveHeaderFocusHome=function(a){r.call(this,
a,!0)},A=l.moveFocusEnd=function(a,b){var d=this.cellNavigation,f=this.contentNode,g=f.scrollTop+(b?0:f.scrollHeight),f=f[b?"firstChild":"lastChild"];-1<f.className.indexOf("dgrid-extra")&&(f=f.previousSibling);var l=-1<f.className.indexOf("dgrid-preload"),n=l?f[(b?"next":"previous")+"Sibling"]:f,t=n.offsetTop+(b?0:n.offsetHeight),q;if(l){for(;n&&0>n.className.indexOf("dgrid-row");)n=n[(b?"next":"previous")+"Sibling"];if(!n)return}!l||1>f.offsetHeight?(d&&(n=this.cell(n,this.cell(a).column.id)),this._focusOnNode(n,
!1,a)):(c("dom-addeventlistener")||(a=e.mixin({},a)),q=h.after(this,"renderArray",function(c){var f=c[b?0:c.length-1];d&&(f=this.cell(f,this.cell(a).column.id));this._focusOnNode(f,!1,a);q.remove();return c}));g===t&&a.preventDefault()},B=l.moveFocusHome=function(a){A.call(this,a,!0)};l.defaultKeyMap={32:d,33:n,34:v,35:A,36:B,37:w,38:g,39:z,40:u};l.defaultHeaderKeyMap={32:d,35:r,36:y,37:w,39:z};return l})},"xgrid/Defaults":function(){define(["xdojo/declare"],function(g){return g("xgrid/Defaults",
null,{minRowsPerPage:100,keepScrollPosition:!0,rowsPerPage:30,deselectOnRefresh:!1,cellNavigation:!1,_skipFirstRender:!1,loadingMessage:null,preload:null,childSelector:".dgrid-row",addUiClasses:!1,noDataMessage:'\x3cspan class\x3d"textWarning"\x3eNo data....\x3c/span\x3e',showExtraSpace:!0})})},"xgrid/Layout":function(){define(["xdojo/declare","xide/utils","xide/widgets/TemplatedWidgetBase","xide/registry","xide/$"],function(g,h,k,m,e){var c={template:null,attachDirect:!0,destroy:function(){this.template&&
this.template.remove(this)&&h.destroy(this.template,!0,this);this.inherited(arguments)},getTemplateNode:function(){return this.template.domNode},getHeaderNode:function(){return this.template.header},getBodyNode:function(){return this.template.grid},getFooterNode:function(){return this.template.footer},resize:function(){this.inherited(arguments);var b=this.template?this.template.domNode:this.domNode,d=!1;this.__masterPanel&&(b=this.__masterPanel.containerNode,d=!0);var a=e(b).height(),c=this.template;
if(c){var g=e(c.header),h=g?g.height():0,l=this._toolbar?this._toolbar._height:0;0<l&&0===h&&(h+=l);l&&g&&g.css("height","auto");g=c.footer?e(c.footer).height():0;a=a-h-g;50<a?(e(c.grid).height(a+"px"),d&&e(c.domNode).width(e(b).width())):e(c.grid).height("inherited")}},buildRendering:function(){if(!this.template){this._domNode=this.domNode;var b=h.addWidget(k,{templateString:'\x3cdiv tabindex\x3d"-1" attachTo\x3d"template" class\x3d"grid-template widget" style\x3d"width: 100%;height: 100%;overflow: hidden;position: relative;padding: 0px;margin: 0px"\x3e\x3cdiv tabindex\x3d"-1" attachTo\x3d"header" class\x3d"grid-header row" style\x3d"width: 100%;height: auto"\x3e\x3c/div\x3e\x3cdiv tabindex\x3d"0" attachTo\x3d"grid" class\x3d"grid-body row"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"footer" class\x3d"grid-footer" style\x3d"position: absolute;bottom: 0px;width: 100%"\x3e\x3c/div\x3e\x3c/div\x3e',
declaredClass:"xgrid/_BaseParent_"+this.declaredClass},null,this.domNode,!0);e(b.domNode).attr("tabIndex",-1);this.template=b;this.header=b.header;this.footer=b.footer;this.domNode=this.gridBody=b.grid;this.id=this.template.id;this.domNode.id=this.id;b.domNode.id=this.id;m._hash[this.id]=this;b.add(this);return this.inherited(arguments)}}};g=g("xgrid.Layout",null,c);g.Implementation=c;return g})},"xgrid/Focus":function(){define(["xdojo/declare","xide/types","xide/utils"],function(g,h,k){k={_focused:!1,
_detectFocus:null,_detectBlur:null,destroy:function(){this.inherited(arguments);window.removeEventListener("focus",this._detectFocus,!0);window.removeEventListener("blur",this._detectBlur,!0)},_onBlur:function(){},set:function(g,e){"focused"==g&&this._onFocusChanged(e);return this.inherited(arguments)},_onFocusChanged:function(g,e){this._focused&&!g&&this._onBlur();!this._focused&&g&&this._emit(h.EVENTS.ON_VIEW_SHOW,this);this._focused=g;this.highlight&&this.highlight(g)},getFocused:function(g){if(this._focusedNode){var e=
this.row(this._focusedNode);if(e)return e[g?"element":"data"]}return null},startup:function(){this.inherited(arguments);this.headerNode.tabIndex=-1;this._focused=!0}};g=g("xgrid.Focus",null,k);g.Implementation=k;return g})},"xgrid/ListRenderer":function(){define(["xdojo/declare","xide/types","./Renderer","dojo/dom-construct","dgrid/Grid"],function(g,h,k,m,e){h={_getLabel:function(){return"List"},_getIcon:function(){return"fa-th-list"},activateRenderer:function(c){this._showHeader(!0)},deactivateRenderer:function(c){},
_configColumns:function(){return e.prototype._configColumns.apply(this,arguments)},insertRow:function(c,b){return e.prototype.insertRow.apply(this,arguments)},renderRow:function(c,b){var d=this,a=this.createRowCells("td",function(a,f){var e=c;f.get?e=f.get(c):"field"in f&&"_item"!==f.field&&(e=e[f.field]);d._defaultRenderCell.call(f,c,e,a,b)},b&&b.subRows,c),f=m.create("div",{role:"row"});f.appendChild(a);return f}};g=g("xgrid.ListRenderer",[k],h);g.Implementation=h;return g})},"xgrid/Renderer":function(){define(["xdojo/declare",
"xide/types"],function(g,h){var k={_renderIndex:0,_lastRenderedArray:null,publishRendering:!1,_getLabel:function(){return""},activateRenderer:function(e){},deactivateRenderer:function(e){},runAction:function(e){},delegate:{onDidRenderCollection:function(){}},renderRow:function(e){return e.render?e.render(e,this.inherited):this.inherited(arguments)},renderArray:function(){this._lastRenderedArray=this.inherited(arguments);this._onDidRenderCollection(arguments);return this._lastRenderedArray},_onDidRenderCollection:function(){this._renderIndex++},
didRender:function(){return 0<=this._renderIndex}},m=g("xgrid.Renderer",null,k);m.Implementation=k;return m})},"xgrid/Clipboard":function(){define(["xdojo/declare","xide/types"],function(g,h){var k={runAction:function(e){switch(e.command){case h.ACTION.CLIPBOARD_COPY:return this.clipboardCopy(),this.refreshActions(),!0;case h.ACTION.CLIPBOARD_PASTE:return this.clipboardPaste();case h.ACTION.CLIPBOARD_CUT:return this.clipboardCut(),!0}return this.inherited(arguments)},clipboardPaste:function(){return this.inherited(arguments)},
clipboardCopy:function(){this.currentCutSelection=null;this.currentCopySelection=this.getSelection();this.publish(h.EVENTS.ON_CLIPBOARD_COPY,{selection:this.currentCopySelection,owner:this,type:this.itemType})},clipboardCut:function(){this.currentCopySelection=null;this.currentCutSelection=this.getSelection()},getClipboardActions:function(e){function c(){var b=a.getSelection();return b&&b.length?b[0]?b:(console.error("have no item"),null):null}function b(){switch(this.title){case "Cut":case "Copy":var b;
b=c()?!1:!0;return!1!==b;case "Paste":return null==a.currentCopySelection}return!1}function d(d,c,e,g){f.push(a.createAction({label:d,command:c,icon:e,tab:"Home",group:"Clipboard",keycombo:g,mixin:{addPermission:!0},shouldDisable:b}))}var a=this,f=[];e=h.ACTION;d("Copy",e.CLIPBOARD_COPY,"fa-copy","ctrl c");d("Paste",e.CLIPBOARD_PASTE,"fa-paste","ctrl v");d("Cut",e.CLIPBOARD_CUT,"fa-cut","ctrl x");return f}},m=g("xgrid.Clipboard",null,k);m.Implementation=k;return m})},"xgrid/ThumbRenderer":function(){define(["xdojo/declare",
"xide/types","dojo/dom-construct","./Renderer"],function(g,h,k,m){h={isThumbGrid:!1,_getLabel:function(){return"Thumb"},_getIcon:function(){return"fa-th-large"},activateRenderer:function(e){this._showHeader(!1);this.isThumbGrid=!0},deactivateRenderer:function(e){this.isThumbGrid=!1},renderRow:function(e){return e.render?e.render(e,this.inherited):k.create("span",{className:"fileGridCell",innerHTML:'\x3cspan class\x3d"fa-cube fa-5x""\x3e\x3c/span\x3e \x3cdiv class\x3d"name"\x3e'+e.name+"\x3c/div\x3e",
style:"color:blue;max-width:200px;float:left;margin:18px;padding:18px;"})}};g=g("xgrid.ThumbRenderer",[m],h);g.Implementation=h;return g})},"xgrid/TreeRenderer":function(){define("xdojo/declare ./Renderer dgrid/Tree dojo/keys xide/utils dojo/on".split(" "),function(g,h,k,m,e,c){function b(b){function a(a,b){_.each(a,function(a){(a=f.row(a))&&a.element&&f.expand(a,b,!0)})}this.onTreeKey(b);var f=this;if(!f.isThumbGrid&&(b.keyCode==m.LEFT_ARROW||b.keyCode==m.RIGHT_ARROW||b.keyCode==m.HOME||b.keyCode==
m.END)){var e=b.target;if((!e||-1==e.className.indexOf("InputInner")&&-1==e.className.indexOf("input")&&"text"!==b.target.type)&&(e=this.row(b))&&e.data){var g=e.data,h=this._isExpanded(g),k=this.collection,u=k.getSync(g[k.idProperty]),n=g.getChildren?g.getChildren():u&&u.children?u.children:null,v=!1;null==n&&k.getChildrenSync&&u&&((n=k.getChildrenSync(u))&&n.length?v=!0:n=null);var p=u?u.isDir||u.directory:!1;!p&&v&&n&&(p=!0);var v=n?n[0]:!1,w=this._focusedNode,z=w?this.down(w,n?n.length:0,!0):
null,n=!0===u._EX||null==u._EX,u=this.getSelection?this.getSelection():[u],r=this.down(w,-1,!0),y=this.down(w,1,!0),A={focus:!0,append:!1,delay:1};if(v&&v._reference){var B=k.getSync(v._reference);B&&(v=B)}if(b.keyCode==m.END&&h&&p&&z&&z.element!==w)this.select(z,null,!0,A);else{if(b.keyCode==m.LEFT_ARROW){b.preventDefault();if(g[k.parentField]&&(g=e.data,!h)){g=(k=k.getSync(g[k.parentField]))?this.row(k):null;if(k&&g.element)return this.select([k],null,!0,A);if(r)return this.select(r,null,!0,A);
c.emit(this.contentNode,"keydown",{keyCode:36,force:!0})}e&&(h?a(u,!1):this.select(r,null,!0,A))}if(b.keyCode==m.RIGHT_ARROW){b.preventDefault();if(p&&n&&h&&!v&&y)return this.select(y,null,!0,A);n&&h?v&&this.select([v],null,!0,A):v||!n||p?a(u,!0):y&&this.select(y,null,!0,A)}}}}}e={_getLabel:function(){return"Tree"},_getIcon:function(){return"fa-tree"},deactivateRenderer:function(b){},activateRenderer:function(){this._showHeader(!0)},__getParent:function(b){if(b&&b.getParent){var a=b.getParent();if(a)return this.row(a).element?
this.__getParent(a):a||b}return b},getCurrentFolder:function(){return this.__getParent(this.getRows()[0])},_isExpanded:function(b){return!!this._expanded[this.row(b).id]},onTreeKey:function(){this.inherited(arguments)},startup:function(){if(!this._started){var d=this.inherited(arguments);this.on("keydown",b.bind(this));return d}}};g=g("xgrid.TreeRenderer",[h,k],e);g.Implementation=e;g.KEYBOARD_HANDLER=b;return g})},"xgrid/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-class dojo/on dojo/topic dojo/has dojo/when dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList xgrid/Selection dojo/has!touch?../util/touch".split(" "),
function(g,h,k,m,e,c,b,d,a,f,t,q,l,x){var u=g(f,{grid:null,getObject:function(a){var b=this.grid;return b._trackError(function(){return b.collection.get(a.id.slice(b.id.length+5))})},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},onDrop:function(b,d,c){var f=this,e=this._targetAnchor=this.targetAnchor,g=this.grid,h=g.collection;!this.before&&e&&(e=e.nextSibling);e=e&&g.row(e);a(e&&h.get(e.id),function(a){if(f!==b)f.onDropExternal(b,d,c,a);else f.onDropInternal(d,
c,a)})},onDropInternal:function(b,d,c){var f=this.grid,e=f.collection,g=this,h=g._targetAnchor,k;h&&(k=this.before?h.previousSibling:h.nextSibling);h=f.row(b[0]);(d||k!==b[0]&&(c||!h||f.down(h).element!==b[0]))&&b.forEach(function(b){a(g.getObject(b),function(a){var b=e.getIdentity(a);f._trackError(function(){return e[d&&e.copy?"copy":"put"](a,{beforeId:c?e.getIdentity(c):null}).then(function(){g._selectedNodes[b]&&(g._selectedNodes[b]=f.row(b).element)})})})})},onDropExternal:function(b,d,c,f){var e=
this.grid,g=this.grid.collection,h=b.grid;d.forEach(function(d,k){a(b.getObject(d),function(a){e._trackError(function(){return g[g.copy?"copy":"put"](a,{beforeId:f?g.getIdentity(f):null}).then(function(){if(!c){if(h){var f=h.collection.getIdentity(a);!k&&b.selectNone();b.delItem(d.id);return h.collection.remove(f)}b.deleteSelectedNodes()}})})})})},onDndStart:function(a){this.inherited(arguments);a===this&&(t.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(a){d("touch")&&
this.isDragging&&1<x.countCurrentTouches(a,this.grid.touchNode)?(b.publish("/dnd/cancel"),t.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!d("touch")||1>=x.countCurrentTouches(a,this.grid.touchNode))&&this.inherited(arguments)},checkAcceptance:function(a){return a.getObject&&f.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new q,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);
return a}});g=g(l,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:u,postMixInProperties:function(){this.inherited(arguments);this.dndParams=h.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(b){f[b.id]=b.element}function b(a){delete f[a.id];e.remove(a.element,"dojoDndItemSelected dojoDndItemAnchor")}this.inherited(arguments);var d=this.dndConstructor||u,c=h.mixin(this.dndParams,{grid:this,dropParent:this.contentNode});"function"===typeof this.expand&&
(c.allowNested=!0);this.dndSource=new d(this.bodyNode,c);var f=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){k.forEach(b.rows,a)});this.on("dgrid-deselect",function(a){k.forEach(a.rows,b)});m.after(this,"destroy",function(){delete this.dndSource._selectedNodes;f=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),d="function"===typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];e.add(b,"dojoDndItem");this.dndSource.setItem(b.id,
{data:a,type:d instanceof Array?d:[d]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});g.GridSource=u;return g})},"xgrid/Grid":function(){define(["dojo/_base/declare","xide/types","./Base"],function(g,h,k){g=g("xgrid/Grid",k,{});g.createGridClass=k.createGridClass;g.classFactory=k.classFactory;g.DEFAULT_GRID_FEATURES=h.DEFAULT_GRID_FEATURES;g.DEFAULT_GRID_BASES=k.DEFAULT_GRID_BASES;g.DEFAULT_GRID_OPTIONS=h.DEFAULT_GRID_OPTIONS;g.DEFAULT_GRID_OPTION_KEYS=
h.DEFAULT_GRID_OPTION_KEYS;return g})},"xgrid/KeyboardNavigation":function(){define(["xdojo/declare","dojo/keys","dojo/_base/lang","dojo/on","xide/utils"],function(g,h,k,m,e){var c=k.hitch;return g("xgrid/KeyboardNavigation",null,{childSelector:".dgrid-row",defer:function(b,d){var a=setTimeout(c(this,function(){a=null;this._destroyed||c(this,b)()}),d||0);return{remove:function(){a&&(clearTimeout(a),a=null);return null}}},buildRendering:function(){this.inherited(arguments);if(!this._keyNavCodes){var b=
this._keyNavCodes={};b[h.UP_ARROW]=c(this,"_onUpArrow");b[h.DOWN_ARROW]=c(this,"_onDownArrow")}"string"==typeof this.childSelector||c(this,"childSelector");b=this.domNode;this.__on(b,"keypress",null,c(this,"_onContainerKeypress"));this.__on(b,"keydown",null,c(this,"_onContainerKeydown"))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},___focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,
1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(b,d,a,c){b&&(this.deselectAll(),this.select([this.row(b).data],null,!0,{focus:!0,delay:10,append:!0}))},getSearchableText:function(b){return b.message||b.name||""},_keyboardSearchCompare:function(b,d){if(b&&!b.data){var a=this.row(b);a&&(b.data=a.data)}if(a=b?b.data?this.getSearchableText(b.data):"":""){var a=a.toLowerCase(),c=a.replace(/^\s+/,"").substr(0,
d.length).toLowerCase(),c=d.length&&c==d?-1:0,a=-1!=a.replace(/^\s+/,"").indexOf(d.toLowerCase());return 0==c&&1<d.length&&a?1:c}},_onContainerKeydown:function(b){if(!b.target||-1==b.target.className.indexOf("input")){var d=this._keyNavCodes[b.keyCode];d?(d(b,this.focusedChild),b.stopPropagation(),b.preventDefault(),this._searchString=""):b.keyCode!=h.SPACE||!this._searchTimer||b.ctrlKey||b.altKey||b.metaKey||(b.stopImmediatePropagation(),b.preventDefault(),m.emit(this.domNode,"keypress",{charCode:h.SPACE,
cancelable:!0,bubbles:!0}))}},_onContainerKeypress:function(b){if(!(this.editing||b.target&&-1!=b.target.className.indexOf("input")||32>b.charCode||b.ctrlKey||b.altKey)){var d=null,a,f=0,e=c(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=g;var b=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;a=this._searchString.substr(0,b);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var c=this.focusedChildNode||
this.focusedChild||null;if(1==b||!c)if(c=this._getNextFocusableChild(c,1),!c)return;b=c;do{var e=this._keyboardSearchCompare(c,a);e&&0==f++&&(d=c);if(-1==e){f=-1;break}c=this._getNextFocusableChild(c,1)}while(c!=b)}),g=String.fromCharCode(b.charCode).toLowerCase();b.preventDefault();b.stopPropagation();e();this.onKeyboardSearch(d,b,a,f)}},_onChildBlur:function(){},_getNextFocusableChild:function(b,c){var a=b;do{if(b){if(b&&b.node){var f=e.find(".dgrid-cell",b.node,!0);f&&(b=f)}b=this._getNext(b,c)}else if(b=
this[0<c?"_getFirst":"_getLast"](),!b)break;if(null!=b&&b!=a)return b}while(b!=a)},_getFirst:function(){var b=e.find(".dgrid-row",this.domNode,!0);if(b){var c=e.find(".dgrid-cell",b,!0);if(c)return c}return b},_getLast:function(){var b=e.find(".dgrid-row",this.domNode,!1);return b&&(b=e.find(".dgrid-cell",b,!0))?b:null},_getPrev:function(b,c){if(b){var a=this.up(b,1,!0);if(a){var f=null;a.data&&(f=a.data);a.element&&(a=a.element);var g=e.find(".dgrid-cell",a,!0);return g?(g.data||(g.data=f),g):a}}},
_getNext:function(b,c){if(b){var a=this.down(b,1,!0);if(a){a.element&&(a=a.element);var f=e.find(".dgrid-cell",a,!0);return f?f:a}}}})})},"xgrid/MultiRenderer":function(){define(["xdojo/declare","xide/types","xgrid/Renderer","dojo/_base/kernel"],function(g,h,k,m){function e(b,d){c[d]=function(){var a=this.getSelectedRenderer();return a[d]?a[d].apply(this,arguments):this.inherited(arguments)}}var c={renderers:null,selectedRenderer:null,lastRenderer:null,rendererActionRootCommand:"View/Layout",runAction:function(b){b=
this.getAction(b);if(-1!==b.command.indexOf(this.rendererActionRootCommand)){var c=b.getParent?b.getParent():null;b._originEvent="change";this.setRenderer(b.value);c&&(c.set("icon",b.get("icon")),c=c.getChildren(),_.each(c,function(a){a._oldIcon&&a.set("icon",a._oldIcon)}));b.set&&b.set("icon","fa-check");return!0}return this.inherited(arguments)},setState:function(b){var c=b.selectedRenderer?m.getObject(b.selectedRenderer):null;c&&(this.setRenderer(c),this.set("collection",this.collection.getDefaultCollection()));
return this.inherited(arguments)},getState:function(b){b=this.inherited(arguments)||{};this.selectedRenderer&&(b.selectedRenderer=this.getSelectedRenderer.declaredClass);return b},getRendererActions:function(b,c){function a(a,b,c){var d="shift f"+u;u++;var k=null,k=e.createAction({label:a,command:f+"/"+a,icon:b,tab:"View",group:"Layout",mixin:{value:c,addPermission:!0,closeOnClick:!1},keycombo:[d],onCreate:function(a){a._oldIcon=b;a.actionType=h.ACTION_TYPE.SINGLE_TOGGLE;a.set("value",c)}});g.push(k);
return g}var f=this.rendererActionRootCommand,e=this,g=[],k=b||this.getRenderers(),m=h.ACTION_VISIBILITY,u=1;g.push(this.createAction({label:"Layout",command:f,icon:"fa-laptop",tab:"View",group:"Layout",mixin:{closeOnClick:!1},onCreate:function(a){a.set("value",e.selectedRenderer);a.setVisibility(m.ACTION_TOOLBAR,!1).setVisibility(m.RIBBON,{expand:!0})}}));_.each(k,function(b){var c=b.Implementation||b.prototype;c._getLabel&&a(c._getLabel(),c._getIcon(),b)});return g},getSelectedRenderer:function(){return this.selectedRenderer.prototype},
startup:function(){var b=this;this._on("onAddGridActions",function(c){b.getRendererActions(b.getRenderers(),c.actions).forEach(function(a){c.actions.push(a)})});this.inherited(arguments);this.selectedRenderer&&$(this.domNode).addClass(this.getSelectedRenderer()._getLabel())},getRenderers:function(){return this.renderers},setRenderer:function(b,c){var a=this;a.getSelection();a.getFocused();var f=a.getSelectedRenderer(),e={"new":b,old:a.selectedRenderer},g=$(this.domNode);g.removeClass(f._getLabel());
f.deactivateRenderer.apply(this,e);this._emit("onChangeRenderer",e);this.lastRenderer=this.selectedRenderer;this.selectedRenderer=b;this.selectedRendererClass=b.prototype.declaredClass;g.addClass(b.prototype._getLabel());b.prototype.activateRenderer.apply(this,e);this.collection.reset();(f=this.refresh())&&f.then&&f.then(function(){a._emit("onChangedRenderer",e)});return f}};_.each("row removeRow renderRow insertRow activateRenderer deactivateRenderer".split(" "),function(b){e(c,b)});g=g("xgrid.MultiRenderer",
null,c);g.Implementation=c;return g})},"xgrid/Search":function(){define(["xdojo/declare","xide/widgets/_Search","dojo/on","xide/Keyboard","xide/types"],function(g,h,k,m,e){return g("xgrid/Search",null,{_searchText:null,_search:null,runAction:function(c){c&&c.command==e.ACTION.SEARCH&&this._search&&(this._search.isHidden()?this._search.show("",!1):this._search.hide());return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);var c=this,b=c.domNode.parentNode,d=new h({});
d.find=function(){c._searchText=this.searchInput.value;c.set("collection",c.collection)};d.showSearchBox(b);d.show("",!1);d.hide();this._search=d;k(d.searchInput,"keydown",function(a){"Escape"===a.code&&(d.hide(),c.focus())});var a=m.defaultMapping(["ctrl f"],function(){d.show("",!1)},e.KEYBOARD_PROFILE.DEFAULT,c.domNode,c,null);this.registerKeyboardMapping(a);this._on("onAddActions",function(a){var d=a.actions,g=a.permissions;action=e.ACTION.SEARCH;a.store.getSync(action)||(a=c.createAction("Search",
action,e.ACTION_ICON.SEARCH,["ctrl f"],"Home","File","item|view",null,null,null,null,null,g,b,c))&&d.push(a)})},_setCollection:function(c){var b=this.inherited(arguments),d=this._searchText,a=this._renderedCollection;if(a&&d){var e=new a.Filter,d=new RegExp(d,"i"),g=this.columns,h=[],k;for(k in g)g.hasOwnProperty(k)&&h.push(e.match(g[k].searchText||g[k].field,d));e=e.or.apply(e,h);this._renderedCollection=a.filter(e);this.refresh()}return b}})})},"xgrid/component":function(){define(["dojo/_base/declare",
"xide/model/Component"],function(g,h){return g("xfile.component",h,{beanType:"",getDependencies:function(){return[]},getLabel:function(){return"xgrid"},getBeanType:function(){return this.beanType}})})}}});define("xgrid/xgrid",[],function(){return null});
//# sourceMappingURL=xgrid.js.map