//>>built
require({cache:{"xgrid/main":function(){define("dojo/_base/kernel xide/data/ObservableStore xide/data/Reference xide/data/Source xgrid/Actions xgrid/Base xgrid/Clipboard xgrid/ColumnHider xgrid/ContextMenu xgrid/Defaults xgrid/DnD xgrid/Focus xgrid/Grid xgrid/Keyboard xgrid/KeyboardNavigation xgrid/Layout xgrid/ListRenderer xgrid/MultiRenderer xgrid/Renderer xgrid/Search xgrid/ThumbRenderer xgrid/component xgrid/Toolbar xgrid/TreeRenderer xgrid/types xgrid/Noob dojo/text!./templateDIV.html".split(" "),
function(d){return d.xgrid})},"xgrid/Actions":function(){define(["xdojo/declare","xide/types","xaction/ActionProvider","xaction/DefaultActions"],function(d,f,g,k){var h={_ActionContextState:null,onActivateActionContext:function(c,b){},onDeactivateActionContext:function(c,b){},onBeforeAction:function(c){},onAfterAction:function(c,b){c=this.getAction(c);if(null!=b&&_.isObject(b)){var e=b.select,a=b.focus||!0;if(e)return this.select(e,null,!0,{append:b.append,focus:a,delay:b.delay||1,expand:b.expand})}this._emit(f.EVENTS.ON_AFTER_ACTION,
c)},hasPermission:function(c){return k.hasAction(this.permissions,c)},addAction:function(c,b){if(b.keyCombo&&_.isArray(b.keyCombo)&&-1!=b.keyCombo.indexOf("dblclick")){var e=this;this.on("dblclick",function(a){(a=e.row(a))&&e.runAction(b,a.data)})}return this.inherited(arguments)},_onSelectionChanged:function(c){this.inherited(arguments);this.refreshActions()},updateActions:function(c,b){var e,a=this.getSelection();c&&b&&(e=c.getItemActions(),e=this._filterActions(a,e,c),b.setItemActions({},e))},
startup:function(){if(!this._started){var c=this;c.domNode.tabIndex=-1;this.on("contextmenu",function(b){b&&b.target&&$(b.target).hasClass("dgrid-content")&&(c.select([],null,!1),c.deselectAll(),"contextmenu"!==b.type&&setTimeout(function(){c.domNode.focus();document.activeElement=c.domNode;$(c.domNode).focus()},1))}.bind(this));this._on("selectionChanged",function(b){this._onSelectionChanged(b)}.bind(this));this._on("onAddActions",function(b){b=b.actions;var e=f.ACTION.HEADER;c.getAction(e)||b.push(c.createAction({label:"Header",
command:e,icon:"fa-hdd-o",tab:"View",group:"Show",mixin:{actionType:"multiToggle"},onCreate:function(a){a.set("value",c.showHeader)},onChange:function(a,b){c._setShowHeader(b);c.showHeader=b;c.onAfterAction(f.ACTION.HEADER)}}))});return this.inherited(arguments)}}};d=d("xgrid.Actions",g,h);d.Implementation=h;return d})},"xgrid/Base":function(){define("xdojo/declare xide/types xgrid/types xide/utils/ObjectUtils xide/utils dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/ThumbRenderer xgrid/TreeRenderer dgrid/util/misc".split(" "),
function(d,f,g,k,h,c,b,e,a,l,p,q,n){function w(a,b,c,e){return d.classFactory(a,b,c,e,v)}function r(a,b){return b.some(function(b){return 0<=a.indexOf(b)})}function m(a,b,c,e,l,p){var t;b=b||z;if(!b&&!c)return z;b&&(t=r(u,_.keys(e)),p=h.cloneKeys(p||v),t&&(h.mixin(p,e),p=_.pick(p,_.identity)),b=w(a,p,[z],b));e=[];t={};if(b&&c){p=h.cloneKeys(x);h.mixin(p,c);for(var q in p)if(c=p[q],p[q]){if(!0===c)c=x[q];else if(x[q]){var n=x[q];c=r(["CLASS","CLASSES","IMPLEMENTATION"],_.keys(c))?h.mixin(h.cloneKeys(n),
c):n}c&&(c=w(q,c.CLASSES||[],[c.CLASS],c.IMPLEMENTATION),e.push(c),t[q]=c)}0<e.length&&(b=w(a,[b],e,l));b.prototype._featureMap=t}return b}var u="EVENTED GRID EDITOR RENDERER DEFAULTS LAYOUT FOCUS i18".split(" "),x=f.DEFAULT_GRID_FEATURES,v=f.GRID_BASES;g=f.DEFAULT_GRID_OPTIONS;var z=d("xgrid.Default",null,{_isHighlighting:!1,_featureMap:{},isRendered:function(a){a=this._normalize(a);var b=this.collection;if(a){a=a.data;for(var b=b.idProperty,c=this._lastRenderedArray,e=0;e<c.length;e++){var l=this.row(c[e]);
if(l&&l.data&&l.data&&a&&l.data[b]===a[b])return!0}}return!1},highlightRow:function(){},getParent:function(){return this._parent},get:function(a){var b=this.getParent();return"iconClass"===a&&b&&b.icon?b.icon():this.inherited(arguments)},set:function(a,b){var c=this.getParent();if("iconClass"===a){var e=c.set;if(e)e.apply(c,[a,b]);else if(c&&c.icon)return c.icon(b),!0}"title"===a&&b&&((e=c.set)?e.apply(c,[a,b]):c&&c.title&&c.title(b));return"loading"===a&&c&&c.startLoading?(e=c._options.icon,1==b?
(c.startLoading("",.5),c.icon("fa-spinner fa-spin")):(c.finishLoading(),c.icon(e)),!0):this.inherited(arguments)},runAction:function(a){a.command==f.ACTION.HEADER&&this._setShowHeader(!this.showHeader);return this.inherited(arguments)},highlight:function(a){var b=$(this.domNode.parentNode);a?this._isHighlighting||(this._isHighlighting=!0,b.addClass("highlight")):(this._isHighlighting=!1,b.removeClass("highlight"))},getState:function(a){a=this.inherited(arguments)||{};a.showHeader=this.showHeader;
return a},postMixInProperties:function(){var a=this.state;a&&(this.showHeader=a.showHeader);return this.inherited(arguments)},renderArray:function(a){this._lastData=a;return this.inherited(arguments)},getData:function(){return this._lastData},refreshItem:function(a,b){b&&(this._muteSelectionEvents=!0);this.collection.emit("update",{target:a});b&&(this._muteSelectionEvents=!1)},onShow:function(){this._emit(f.EVENTS.ON_VIEW_SHOW,this);return this.inherited(arguments)},isActive:function(a){return h.isDescendant(this.domNode,
a||document.activeElement)},_showHeader:function(a){$(this.domNode).find(".dgrid-header").each(function(b,c){$(c).css("display",a?"":"none")});$(this.domNode).find(".dgrid-scroller").each(function(b,c){$(c).css("margin-top",a?26:0)})},destroy:function(){this._emit("destroy",this);return this.inherited(arguments)},hasFeature:function(a){return r(["name"],_.keys(this._featureMap))},getRows:function(a,b){var c=[],e=this,l=$(e.domNode).find(".dgrid-row");_.each(l,function(b){(b=e.row(b))&&b.element&&
c.push(b[a?"element":"data"])});return b?c.filter(b):c},startup:function(){var a=this.inherited(arguments);this.columns&&_.each(this.columns,function(a){a.width&&this.styleColumn(parseInt(a.id),"width:"+a.width)},this);var b=this;this.showExtraSpace&&this.on("dgrid-refresh-complete",function(){if(b.getRows().length){var a=$(b.contentNode).find(".dgrid-extra");a.length||(a=$('\x3cdiv class\x3d"dgrid-extra" style\x3d"width:100%;height:80px"\x3e\x3c/div\x3e'),$(b.contentNode).append(a),a.on("click",
function(){b.deselectAll()}),a.on("contextmenu",function(){b.deselectAll()}))}});return a}});k=m("xgrid/Base",{options:h.clone(g)},{SELECTION:!0,KEYBOARD_SELECTION:!0,PAGINATION:!1,COLUMN_HIDER:!1},null,{});k.createGridClass=m;k.classFactory=w;k.DEFAULT_GRID_FEATURES=x;k.DEFAULT_GRID_BASES=v;k.DEFAULT_GRID_OPTIONS=g;k.DEFAULT_GRID_OPTION_KEYS=f.DEFAULT_GRID_OPTION_KEYS;return k})},"xgrid/types":function(){define("xdojo/declare xide/types xgrid/ColumnHider dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/extensions/Pagination xgrid/Selection xgrid/Toolbar xgrid/ContextMenu xgrid/Keyboard xide/mixins/EventedMixin dgrid/OnDemandGrid xgrid/Defaults xgrid/Layout xgrid/Focus xgrid/ListRenderer xgrid/Clipboard xgrid/Actions xlang/i18".split(" "),
function(d,f,g,k,h,c,b,e,a,l,p,q,n,w,r,m,u,x,v){f.GRID_BASES={GRID:q,LAYOUT:w,DEFAULTS:n,RENDERER:m,EVENTED:p,FOCUS:r,i18:v};f.DEFAULT_GRID_OPTIONS={USE_JQUERY_CSS:!0,DESELECT_SELECTED:!0,CLEAR_SELECTION_ON_CLICK:!0,ITEM_ACTIONS:{},GRID_ACTIONS:{},PUBLISH_SELECTION:!1};f.GRID_OPTION={USE_JQUERY_CSS:"USE_JQUERY_CSS",DESELECT_SELECTED:"DESELECT_SELECTED",CLEAR_SELECTION_ON_CLICK:"CLEAR_SELECTION_ON_CLICK",ITEM_ACTIONS:"ITEM_ACTIONS",GRID_ACTIONS:"GRID_ACTIONS"};f.DEFAULT_GRID_FEATURES={SELECTION:{CLASS:b,
IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:l,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:g,IMPLEMENTATION:{},CLASSES:null},COLUMN_REORDER:{CLASS:k,IMPLEMENTATION:{},CLASSES:null},COLUMN_RESIZER:{CLASS:h,IMPLEMENTATION:{},CLASSES:null}};f.GRID_FEATURES={SELECTION:{CLASS:b,IMPLEMENTATION:{},CLASSES:null},KEYBOARD_SELECTION:{CLASS:l,IMPLEMENTATION:{},CLASSES:null},COLUMN_HIDER:{CLASS:g,IMPLEMENTATION:{},CLASSES:null},COLUMN_REORDER:{CLASS:k,IMPLEMENTATION:{},CLASSES:null},COLUMN_RESIZER:{CLASS:h,
IMPLEMENTATION:{},CLASSES:null},PAGINATION:{CLASS:c,IMPLEMENTATION:{},CLASSES:null},TOOLBAR:{CLASS:e,IMPLEMENTATION:{},CLASSES:null},CONTEXT_MENU:{CLASS:a,IMPLEMENTATION:{},CLASSES:null},ACTIONS:{CLASS:x,IMPLEMENTATION:{},CLASSES:null},CLIPBOARD:{CLASS:u,IMPLEMENTATION:{},CLASSES:null}};return d(null,[],{})})},"xgrid/ColumnHider":function(){define(["xdojo/declare","dojo/has","dgrid/util/misc","xide/types","xide/utils"],function(d,f,g,k,h){return d("xgrid.ColumnHider",null,{columnHiderActionRootCommand:"View/Columns",
i18nColumnHider:{},_columnHiderRules:null,_runAction:function(c,b,e){if(c&&-1!=c.command.indexOf(this.columnHiderActionRootCommand)){var a=c.column,l=this.isColumnHidden(a.id);this.showColumn(a.id,l);!1!==b&&c.set("value",!this.isColumnHidden(a.id))}return this.inherited(arguments)},getColumnHiderActions:function(c,b){function e(b){var e="Show "+(b.label||b.field||""),q=b.icon||"fa-cogs";if(!b.unhidable){var d=l.createAction(e,a+"/"+e,q,null,"View","Columns","item|view",function(a){var c={widgetArgs:{checked:!b.hidden,
iconClass:q,style:"float:inherit;"},actionType:"multiToggle"};a.actionType="multiToggle";a.setVisibility(k.ACTION_VISIBILITY_ALL,h.cloneKeys(c,!1));e=a.label.replace("Show ","")},null,{column:b,filterGroup:"item|view",tab:"View",value:!b.hidden,addPermission:!0},null,null,c,n,l,l);d&&p.push(d)}}var a=this.columnHiderActionRootCommand,l=this,p=[],q=k.ACTION_VISIBILITY,n=this.domNode;b=b||[];_.find(b,{command:a})||p.push(this.createAction({label:"Columns",command:a,icon:"fa-columns",tab:"View",group:"Columns",
toggleGroup:l.id+"Columns",onCreate:function(a){a.setVisibility(q.RIBBON,{expand:!0}).setVisibility(q.ACTION_TOOLBAR,!1)}}));var d=this.subRows,f=!0,m,u,g,v;g=0;for(m=d.length;g<m;g++)for(v=0,u=d[g].length;v<u;v++)e(d[g][v]),f&&(f=!1);return p},resize:function(){this.inherited(arguments);this._checkHiddenColumns()},_checkHiddenColumns:function(){var c=this.subRows,b,e,a,l,p=$(this.domNode).width();a=0;for(b=c.length;a<b;a++)for(l=0,e=c[a].length;l<e;l++){var q=c[a][l];q.minWidth&&(p<q.minWidth?q.unhidable||
this.showColumn(q.id,!1):this.showColumn(q.id,!0))}},startup:function(){if(!this._started){this._columnHiderCheckboxes={};this._columnHiderRules={};var c=this.inherited(arguments);this._checkHiddenColumns();var b=this.subRows,e,a,l,p,q=this;l=0;for(e=b.length;l<e;l++)for(p=0,a=b[l].length;p<a;p++){var n=b[l][p],d=n.id;!0===n.hidden&&(n.hidden=!1,q._hideColumn(d),n.hidden=!0)}if(this.getActionStore)this.getActionStore().on("update",function(a){a=a.target;-1!==a.command.indexOf("View/Columns")&&(q.showColumn(a.column.id,
a.get("value")),q.onAfterAction(a))});return c}},left:function(c,b){return this.right(c,-b)},right:function(c,b){c.element||(c=this.cell(c));for(var e=this.inherited(arguments),a=c;e.column.hidden;){e=this.inherited(arguments,[e,0<b?1:-1]);if(a.element===e.element)return c;a=e}return e},isColumnHidden:function(c){return!!this._columnHiderRules[c]},_hideColumn:function(c){var b=this,e="#"+g.escapeCssIdentifier(this.template?this.template.id:this.domNode.id)+" .dgrid-column-",a;this._columnHiderRules[c]||
(this._columnHiderRules[c]=g.addCssRule(e+g.escapeCssIdentifier(c,"-"),"display: none;"),8!==f("ie")&&10!==f("ie"))||(a=g.addCssRule(".dgrid-row-table","display: inline-table;"),window.setTimeout(function(){a.remove();b.resize()},0))},_showColumn:function(c){this._columnHiderRules[c]&&(this._columnHiderRules[c].remove(),delete this._columnHiderRules[c])},showColumn:function(c,b){this.isColumnHidden(c)?b&&this._showColumn(c):b||this._hideColumn(c)}})})},"xgrid/Selection":function(){define("xdojo/declare xide/types xide/utils dgrid/Selection dojo/dom-class dojo/on dojo/Deferred".split(" "),
function(d,f,g,k,h,c,b){var e={_lastSelection:null,_lastFocused:null,_refreshInProgress:null,_muteSelectionEvents:!0,selectAll:function(a){this.select(this.getRows(a),null,!0,{append:!1,delay:1})},getState:function(a){a=this.inherited(arguments)||{};var b=this._preserveSelection(),c={selected:[]},e=this.collection.idProperty;b.selection&&e&&_.each(b.selection,function(a){a&&a[e]&&c.selected.push(a[e])});b.focused&&(c.focused=b.focused.path);a.selection=c;return a},refresh:function(a){if(this._refreshInProgress)return this._refreshInProgress;
var b=!1!==a?this._preserveSelection():null,c=this,e=this.isActive(),n=this.inherited(arguments);(this._refreshInProgress=n)&&n.then&&n.then(function(){c._refreshInProgress=null;e&&b&&c._restoreSelection(b,1,!e,"restore")});return n},onShow:function(){this.select(this.getSelection(),null,!0,{focus:!0,delay:0});this.inherited(arguments)},_normalize:function(a){if(!a)return null;a.element||(a=this.cell(a));a&&a.row&&(a=a.row);return a},deselectAll:function(){this._lastSelection&&(this.clearSelection(),
this._lastFocused=this._lastSelection=null,$(this.domNode).find(".dgrid-focus").each(function(a,b){$(b).removeClass("dgrid-focus")}),this._emit("selectionChanged",{selection:[],why:"clear",source:"code"}))},invertSelection:function(a){var b=a||this.getSelection()||[],c=[];a=this.getRows();_.each(a,function(a){-1===b.indexOf(a)&&c.push(a)});return this.select(c,null,!0,{append:!1})},runAction:function(a){_.isString(a)&&(a=this.getActionStore().getSync(a));return"File/Select/None"===a.command?(this.deselectAll(),
!0):"File/Select/All"===a.command?(this.selectAll(),!0):"File/Select/Invert"===a.command?this.invertSelection():this.inherited(arguments)},_preserveSelection:function(){this.__lastSelection=this.getSelection();this._lastFocused=this.getFocused();return{selection:this.getSelection(),focused:this.getFocused()}},_restoreSelection:function(a,b,c,e){var l=a?a.focused:this._lastFocused;a=a?a.selection:this.__lastSelection;if(_.isEmpty(a))this._lastFocused=null;else return b=this.select(a,null,!0,{silent:null!=
c?c:!0,append:!1,delay:null!=b?b:0},e),l&&this.isActive()&&this.focus(this.row(l)),b},getPrevious:function(a,b,c){a=a||this.getFocused(b);a=this._normalize(a);var e=this.cell(this._move(a,-1,"dgrid-row"));if(e&&e.row&&(e=e.row[b?"element":"data"],!0===c&&this.isSelected(e))){if(a&&a.data&&a.data==e)return null;if(a=this.getPrevious(e,b,c))return a}return e},getNext:function(a,b,c){a=a||this.getFocused(b);a=this._normalize(a);var e=this.cell(this._move(a,1,"dgrid-row"));if(e&&e.row&&(e=e.row[b?"element":
"data"],!0===c&&this.isSelected(e))){if(a&&a.data&&a.data==e)return null;if(a=this.getNext(e,b,c))return a}return e},getSelection:function(a){var b=[];if(this.collection){for(var c in this.selection){var e=this.collection.getSync(c);e&&b.push(e)}if(a)return b.filter(a)}return b},getSelectedItem:function(a){a=this.getSelection(a);return 1==a.length?a[0]:null},postCreate:function(){function a(a){var b=[];a&&a.rows&&a.rows.forEach(function(a){b.push(a.id)});return b}function b(a){return _.all(a,function(b){return b.length==
a[0].length&&0==_.difference(b,a[0]).length})}var c=this;if(!0===this.options[f.GRID_OPTION.CLEAR_SELECTION_ON_CLICK]){var e=function(a){a&&a.target&&h.contains(a.target,"dgrid-content")&&this.deselectAll()}.bind(this);this.on("click",function(a){e(a)}.bind(this))}this.on("dgrid-select",function(e){var l=a(c._lastSelection),p=a(e);b([l,p])||(c._lastSelection=e,c._emit("selectionChanged",{selection:c.getSelection(),why:"select",source:e.parentType}))});return this.inherited(arguments)},_fireSelectionEvents:function(){if(!0!==
this._muteSelectionEvents)return this.inherited(arguments)},__lastLast:null,__lastFirst:null,__select:function(a,b,c,e,d){_.each(a,function(a){a&&(a=this.row(a))&&this._select(a,b,c)},this);e&&e.resolve(a);this._muteSelectionEvents=!1;this._fireSelectionEvents();if((e=this.getRows())&&e.length&&a&&a.length&&c&&d&&"mouse"!==d){d=a[a.length-1];if(e[e.length-1]==d){if(this.__lastLast&&this.__lastLast==d){this._emit("bounced",{direction:1,item:d});return}this.__lastLast=d}else this.__lastLast=null;a=
a[0];e[0]==a?this.__lastFirst&&this.__lastFirst==a?this._emit("bounced",{direction:-1,item:a}):this.__lastFirst=a:this.__lastFirst=null}else this.__lastFirst=null},select:function(a,c,e,d,h){clearTimeout(this._selectTimer);var l="mouse"===h;this.isActive();var p=new b;h=h||"";d=d||{};"update"===h&&e&&(d.focus=!0,d.append=!1,d.delay=1,this.focus());l&&(d.focus=!0);e=null==e?!0:e;var l=d.delay||0,m=this;!0===d.silent&&(m._muteSelectionEvents=!0);!1===d.append&&(m.clearSelection(),$(m.domNode).find(".dgrid-focus").each(function(a,
b){$(b).removeClass("dgrid-focus")}));var f=g.isArray(a)?a:[a];if(!_.isEmpty(f)){var q=[];if(_.isNumber(f[0])){var n=m.getRows();_.each(f,function(a){q.push(n[a])});f=q}else if(_.isString(f[0])){var k=this.collection;_.each(f,function(a){(a=k.getSync(a))&&q.push(a)});f=q}else f&&f[0]&&f[0].tagName&&(_.each(f,function(a){q.push(m.row(a).data)}),f=q);if(!f.length)return p.resolve(),p;!0===d.focus&&d.expand&&(m.isRendered(f[0])||m._expandTo(f[0]));d.expand&&(m.isRendered(f[0])||m._expandTo(f[0]));l?
this._selectTimer=setTimeout(function(){!m.destroyed&&m.collection&&(!1===d.append&&m.clearSelection(),$(m.domNode).find(".dgrid-focus").each(function(a,b){$(b).removeClass("dgrid-focus")}),f.length&&m.focus(f[0],!1),m.__select(f,c,e,p,h))},l):m.__select(f,c,e,p,h);return p}},_setLast:function(a,b,c){b=[];for(c=0;c<a.length;c++)b.push(this.collection.getIdentity(a[c]))},isExpanded:function(a){a=this._normalize("root");return!!this._expanded[a.id]},_expandTo:function(a){if(a){var b=this.collection;
_.isString(a)&&(a=b.getSync(a));(a=b.getSync(a[b.parentField])||a.getParent?a.getParent():null)&&(this.isRendered(a)?this.isExpanded(a)||this.expand(a,!0,!0):this._expandTo(a))}},isRendered:function(a){a=this._normalize(a);var b=this.collection;if(a){a=a.data;for(var b=b.idProperty,c=this._lastRenderedArray,e=0;e<c.length;e++){var d=this.row(c[e]);if(d&&d.data&&d.data&&a&&d.data[b]===a[b])return!0}}return!1},startup:function(){this.inherited(arguments);var a=this;this.getSelection&&(this._listeners=
this._listeners||[],this._listeners.push(c(a.domNode,"keyup",function(b){if(!b.metaKey&&!b.altKey){var c=a.keyMap[b.keyCode],e;if(e=c)e=!(b.target.type&&32===b.keyCode);e&&0==a.getSelection().length&&c.call(a,b)}})))}};d=d("xgrid.Selection",k,e);d.Implementation=e;return d})},"xgrid/Toolbar":function(){define(["xdojo/declare","xide/utils","xide/types","xide/widgets/ActionToolbar"],function(d,f,g,k){var h={_toolbar:null,toolbarInitiallyHidden:!1,runAction:function(c){return c.command==g.ACTION.TOOLBAR?
(this.showToolbar(null==this._toolbar),!0):this.inherited(arguments)},getToolbar:function(){return this._toolbar},showToolbar:function(c,b,e,a){null==c&&(c=null==this._toolbar);c&&!this._toolbar&&(b=f.addWidget(b||k,{style:"min-height:30px;height:auto;width:100%"},this,e||this.header,!0),f.resizeTo(b,this.header,!1,!0),!1!==a&&(b.addActionEmitter(this),b.setActionEmitter(this),this.refreshActions&&this.refreshActions()),f.resizeTo(this.header,b,!0,!1),this._toolbar=b,this.add&&this.add(b),this._emit("showToolbar",
b));!c&&this._toolbar&&(f.destroy(this._toolbar,!0,this),$(e||this.header).css("height","auto"));this.resize();return this._toolbar},getState:function(c){c=this.inherited(arguments)||{};c.toolbar=null!==this._toolbar;return c},setState:function(c){c&&c.toolbar&&this.showToolbar(c.toolbar);return this.inherited(arguments)},startup:function(){var c=this;this._started||(this._on("onAddActions",function(b){var e=b.actions,a=g.ACTION.TOOLBAR;b.store.getSync(a)||e.push(c.createAction({label:"Toolbar",command:a,
icon:g.ACTION_ICON.TOOLBAR,tab:"View",group:"Show",keycombo:["ctrl b"],mixin:{actionType:"multiToggle",value:!1,id:f.createUUID()},onCreate:function(a){a.set("value",null!==c._toolbar)},onChange:function(a,b){c.showToolbar(b);c.onAfterAction(g.ACTION.TOOLBAR)}}))}),this.inherited(arguments),this.showToolbar(!this.toolbarInitiallyHidden))}};d=d("xgrid.Toolbar",null,h);d.Implementation=h;return d})},"xgrid/ContextMenu":function(){define(["dojo/_base/declare","xide/utils","xide/widgets/ContextMenu",
"xide/widgets/_Widget"],function(d,f,g,k){return d("xgrid.ContextMenu",null,{contextMenu:null,getContextMenu:function(){return this.contextMenu},destroy:function(){this.contextMenu&&this.contextMenu.destroy();this.inherited(arguments)},_createContextMenu:function(){var d=this.contextMenuArgs||{};f.mixin(d,{owner:this,delegate:this});var c=this.contentNode,d=new g(d,c);d.openTarget=c;d.init({preventDoubleContext:!1});d._registerActionEmitter(this);this.contextMenu=d},startup:function(){this._started||
(this.inherited(arguments),this._createContextMenu())}})})},"xgrid/Keyboard":function(){define("dojo/_base/declare dojo/aspect dojo/dom-class dojo/on dojo/_base/lang dojo/has dgrid/util/misc dojo/_base/sniff".split(" "),function(d,f,g,k,h,c,b){function e(a){a.preventDefault()}var a={checkbox:1,radio:1,button:1},l=/\bdgrid-cell\b/,p=/\bdgrid-row\b/;c.add("dom-contains",function(a,b,c){return!!c.contains});var q=function(a,b,c){function e(a,b){return a[b+"All"]("[id]:not(.ui-state-disabled):not(.dgrid-content-parent):first")}
c=0>c;var d,t;a=b.row(a).element;a=$(a);if(a.length)if(d=b.up(b._focusedNode,1,!0),d=$(d.element),d.length)if(b=a.position().top,t=a.position().left,d=a,c){do d=d.prev("[id]");while(d.length&&!(d.position().top<b&&d.position().left<=t));d.is(".ui-state-disabled")&&(d=e(d,"next"))}else{do d=d.next("[id]");while(d.length&&!(d.position().top>b&&d.position().left>=t));d.is(".ui-state-disabled")&&(d=e(d,"prev"))}else d=a;return d},n=d(null,{pageSkip:10,tabIndex:-1,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);
this.keyMap||(this.keyMap=h.mixin({},n.defaultKeyMap));this.headerKeyMap||(this.headerKeyMap=h.mixin({},n.defaultHeaderKeyMap))},postCreate:function(){function c(b){var c=b.target;return c.type&&(!a[c.type]||32===b.keyCode)}function e(a){function e(){d._focusedHeaderNode&&(d._focusedHeaderNode.tabIndex=-1);if(d.showHeader){if(t)for(var a=d.headerNode.getElementsByTagName("th"),b=0,c;c=a[b];++b){if(h.test(c.className)){d._focusedHeaderNode=q=c;break}}else d._focusedHeaderNode=q=d.headerNode;q&&(q.tabIndex=
d.tabIndex)}}var t=d.cellNavigation,h=t?l:p,m=a===d.headerNode,q=a;m?(e(),f.after(d,"renderHeader",e,!0)):f.after(d,"renderArray",function(c){var e=d._focusedNode||q;if(h.test(e.className)&&b.contains(a,e))return c;for(var t=a.getElementsByTagName("*"),f=0,l;l=t[f];++f)if(h.test(l.className)){e=d._focusedNode=l;break}e.tabIndex=d.tabIndex;return c});d._listeners.push(k(a,"mousedown",function(a){c(a)||d._focusOnNode(a.target,m,a)}));d._listeners.push(k(a,"keydown",function(a){if(!a.metaKey&&!a.altKey){var b=
d[m?"headerKeyMap":"keyMap"][a.keyCode];b&&!c(a)&&b.call(d,a)}}))}this.inherited(arguments);var d=this;this.tabableHeader&&(e(this.headerNode),k(this.headerNode,"dgrid-cellfocusin",function(){d.scrollTo({x:this.scrollLeft})}));e(this.contentNode);this._debouncedEnsureScroll=b.debounce(this._ensureScroll,this)},removeRow:function(a){if(!this._focusedNode)return this.inherited(arguments);var b=this,c=document.activeElement===this._focusedNode,e=this[this.cellNavigation?"cell":"row"](this._focusedNode);
if(!e)return console.error("no focus target"),this.inherited(arguments);var d=e.row||e,t;a=a.element||a;a===d.element&&((t=this.down(d,!0))&&t.element!==a||(t=this.up(d,!0)),this._removedFocus={active:c,rowId:d.id,columnId:e.column&&e.column.id,siblingId:t&&t.element!==a?t.id:void 0},setTimeout(function(){b._removedFocus&&b._restoreFocus(d.id)},0),this._focusedNode=null);this.inherited(arguments)},insertRow:function(){var a=this.inherited(arguments);this._removedFocus&&!this._removedFocus.wait&&this._restoreFocus(a);
return a},_restoreFocus:function(a){var b=this._removedFocus,c;if((a=(a=a&&this.row(a))&&a.element&&a.id===b.rowId?a:"undefined"!==typeof b.siblingId&&this.row(b.siblingId))&&a.element){if(!a.element.parentNode.parentNode){b.wait=!0;return}"undefined"!==typeof b.columnId&&(c=this.cell(a,b.columnId))&&c.element&&(a=c);b.active&&0!==a.element.offsetHeight?this._focusOnNode(a,!1,null):(g.add(a.element,"dgrid-focus"),a.element.tabIndex=this.tabIndex,this._focusedNode=a.element)}delete this._removedFocus},
addKeyHandler:function(a,b,c){return f.after(this[c?"headerKeyMap":"keyMap"],a,b,!0)},_ensureRowScroll:function(a){var b=this.getScrollPosition().y;b>a.offsetTop?this.scrollTo({y:a.offsetTop}):b+this.contentNode.offsetHeight<a.offsetTop+a.offsetHeight&&this.scrollTo({y:a.offsetTop-this.contentNode.offsetHeight+a.offsetHeight})},_ensureColumnScroll:function(a){var b=this.getScrollPosition().x,c=a.offsetLeft;if(b>c)this.scrollTo({x:c});else{var e=this.bodyNode.clientWidth;a=a.offsetWidth;var d=c+a;
b+e<d&&this.scrollTo({x:e>a?d-e:c})}},_ensureScroll:function(a,b){this.cellNavigation&&(this.columnSets||1<this.subRows.length)&&!b&&this._ensureRowScroll(a.row.element);this.bodyNode.clientWidth<this.contentNode.offsetWidth&&this._ensureColumnScroll(a.element)},_focusOnNode:function(a,b,c,e){var d="_focused"+(b?"Header":"")+"Node",f=this[d],m=this.cellNavigation?"cell":"row",q=this[m](a),t,n,u,w,r;if(a=q&&q.element){if(this.cellNavigation)for(t=a.getElementsByTagName("input"),r=0,u=t.length;r<u;r++)if(n=
t[r],(-1!==n.tabIndex||"_dgridLastValue"in n)&&!n.disabled){n.focus();w=!0;break}null!==c&&(c=h.mixin({grid:this},c),c.type&&(c.parentType=c.type),c.bubbles||(c.bubbles=!0));f&&(g.remove(f,"dgrid-focus"),f.removeAttribute("tabindex"),c&&(c[m]=this[m](f),k.emit(f,"dgrid-cellfocusout",c)));f=this[d]=a;c&&(c[m]=q);d=this.cellNavigation?l:p;!w&&d.test(a.className)&&(a.tabIndex=this.tabIndex,a.focus());g.add(a,"dgrid-focus");c&&!1!==e&&k.emit(f,"dgrid-cellfocusin",c);this._debouncedEnsureScroll(q,b)}},
focusHeader:function(a){this._focusOnNode(a||this._focusedHeaderNode,!0)},focus:function(a,b){var c=a||this._focusedNode;c?this._focusOnNode(c,!1,null,b):this.contentNode.focus()}}),w=n.moveFocusVertical=function(a,b){if(this.isThumbGrid){var c=q(a,this,b);if(c&&c.length){this._focusOnNode(c[0],!1,a);a.preventDefault();return}}var e=this.cellNavigation,c=this[e?"cell":"row"](a),d=e&&c.column.id,c=this.down(this._focusedNode,b,!0);e&&(c=this.cell(c,d));this._focusOnNode(c,!1,a);a.preventDefault()};
d=n.moveFocusUp=function(a){w.call(this,a,-1)};var r=n.moveFocusDown=function(a){w.call(this,a,1)},m=n.moveFocusPageUp=function(a){w.call(this,a,-this.pageSkip)},u=n.moveFocusPageDown=function(a){w.call(this,a,this.pageSkip)},x=n.moveFocusHorizontal=function(a,b){if(this.cellNavigation||!0===this.isThumbGrid){var c=!this.row(a),e=this["_focused"+(c?"Header":"")+"Node"];1==this.isThumbGrid?(c=this.down(this._focusedNode,b,!0),this._focusOnNode(c,!1,a)):this._focusOnNode(this.right(e,b),c,a);a.preventDefault()}},
v=n.moveFocusLeft=function(a){x.call(this,a,-1)},z=n.moveFocusRight=function(a){x.call(this,a,1)},A=n.moveHeaderFocusEnd=function(a,b){var c;this.cellNavigation&&(c=this.headerNode.getElementsByTagName("th"),this._focusOnNode(c[b?0:c.length-1],!0,a));a.preventDefault()},B=n.moveHeaderFocusHome=function(a){A.call(this,a,!0)},y=n.moveFocusEnd=function(a,b){var e=this.cellNavigation,d=this.contentNode,l=d.scrollTop+(b?0:d.scrollHeight),d=d[b?"firstChild":"lastChild"];-1<d.className.indexOf("dgrid-extra")&&
(d=d.previousSibling);var m=-1<d.className.indexOf("dgrid-preload"),p=m?d[(b?"next":"previous")+"Sibling"]:d,q=p.offsetTop+(b?0:p.offsetHeight),n;if(m){for(;p&&0>p.className.indexOf("dgrid-row");)p=p[(b?"next":"previous")+"Sibling"];if(!p)return}!m||1>d.offsetHeight?(e&&(p=this.cell(p,this.cell(a).column.id)),this._focusOnNode(p,!1,a)):(c("dom-addeventlistener")||(a=h.mixin({},a)),n=f.after(this,"renderArray",function(c){var d=c[b?0:c.length-1];e&&(d=this.cell(d,this.cell(a).column.id));this._focusOnNode(d,
!1,a);n.remove();return c}));l===q&&a.preventDefault()},C=n.moveFocusHome=function(a){y.call(this,a,!0)};n.defaultKeyMap={32:e,33:m,34:u,35:y,36:C,37:v,38:d,39:z,40:r};n.defaultHeaderKeyMap={32:e,35:A,36:B,37:v,39:z};return n})},"xgrid/Defaults":function(){define(["xdojo/declare"],function(d){return d("xgrid/Defaults",null,{minRowsPerPage:100,keepScrollPosition:!0,rowsPerPage:30,deselectOnRefresh:!1,cellNavigation:!1,_skipFirstRender:!1,loadingMessage:null,preload:null,childSelector:".dgrid-row",
addUiClasses:!1,noDataMessage:'\x3cspan class\x3d"textWarning"\x3eNo data....\x3c/span\x3e',showExtraSpace:!0})})},"xgrid/Layout":function(){define(["xdojo/declare","xide/utils","xide/widgets/TemplatedWidgetBase","xide/registry","dojo/dom-construct"],function(d,f,g,k,h){h={template:null,attachDirect:!0,destroy:function(){this.template&&this.template.remove(this)&&f.destroy(this.template,!0,this);this.inherited(arguments)},getTemplateNode:function(){return this.template.domNode},getHeaderNode:function(){return this.template.header},
getBodyNode:function(){return this.template.grid},getFooterNode:function(){return this.template.footer},resize:function(){this.inherited(arguments);var c=this.template?this.template.domNode:this.domNode,b=!1;this.__masterPanel&&(c=this.__masterPanel.containerNode,b=!0);var e=$(c).height(),a=this.template;if(a){var d=a.header?$(a.header).height():0,f=this._toolbar?this._toolbar._height:0;0<f&&0==d&&(d+=f);f=a.footer?$(a.footer).height():0;e=e-d-f;50<e?($(a.grid).height(e+"px"),b&&$(a.domNode).width($(c).width())):
$(a.grid).height("inherited")}},buildRendering:function(){if(!this.template){this._domNode=this.domNode;var c=f.addWidget(g,{templateString:'\x3cdiv tabindex\x3d"-1" attachTo\x3d"template" class\x3d"grid-template widget" style\x3d"width: 100%;height: 100%;overflow: hidden;position: relative;padding: 0px;margin: 0px"\x3e\x3cdiv tabindex\x3d"-1" attachTo\x3d"header" class\x3d"grid-header row"\x3e\x3c/div\x3e\x3cdiv tabindex\x3d"0" attachTo\x3d"grid" class\x3d"grid-body row"\x3e\x3c/div\x3e\x3cdiv attachTo\x3d"footer" class\x3d"grid-footer" style\x3d"position: absolute;bottom: 0px;width: 100%"\x3e\x3c/div\x3e\x3c/div\x3e',
declaredClass:"xgrid/_BaseParent_"+this.declaredClass},null,this.domNode,!0);$(c.domNode).attr("tabIndex",-1);this.template=c;this.header=c.header;this.footer=c.footer;this.domNode=this.gridBody=c.grid;this.id=this.template.id;this.domNode.id=this.id;c.domNode.id=this.id;k._hash[this.id]=this;c.add(this,null,!1);return this.inherited(arguments)}}};d=d("xgrid.Layout",null,h);d.Implementation=h;return d})},"xgrid/Focus":function(){define(["xdojo/declare","xide/types","xide/utils"],function(d,f,g){g=
{_focused:!1,_detectFocus:null,_detectBlur:null,destroy:function(){this.inherited(arguments);window.removeEventListener("focus",this._detectFocus,!0);window.removeEventListener("blur",this._detectBlur,!0)},_onBlur:function(){},set:function(d,f){"focused"==d&&this._onFocusChanged(f);return this.inherited(arguments)},_onFocusChanged:function(d,h){this._focused&&!d&&this._onBlur();!this._focused&&d&&this._emit(f.EVENTS.ON_VIEW_SHOW,this);this._focused=d;this.highlight&&this.highlight(d)},getFocused:function(d){if(this._focusedNode){var f=
this.row(this._focusedNode);if(f)return f[d?"element":"data"]}return null},startup:function(){this.inherited(arguments);this.headerNode.tabIndex=-1;this._focused=!0}};d=d("xgrid.Focus",null,g);d.Implementation=g;return d})},"xgrid/ListRenderer":function(){define(["xdojo/declare","xide/types","./Renderer","dojo/dom-construct","dgrid/Grid"],function(d,f,g,k,h){f={_getLabel:function(){return"List"},_getIcon:function(){return"fa-th-list"},activateRenderer:function(c){this._showHeader(!0)},deactivateRenderer:function(c){},
_configColumns:function(){return h.prototype._configColumns.apply(this,arguments)},insertRow:function(c,b){return h.prototype.insertRow.apply(this,arguments)},renderRow:function(c,b){var e=this,a=this.createRowCells("td",function(a,d){var f=c;d.get?f=d.get(c):"field"in d&&"_item"!==d.field&&(f=f[d.field]);e._defaultRenderCell.call(d,c,f,a,b)},b&&b.subRows,c),d=k.create("div",{role:"row"});d.appendChild(a);return d}};d=d("xgrid.ListRenderer",[g],f);d.Implementation=f;return d})},"xgrid/Renderer":function(){define(["xdojo/declare",
"xide/types"],function(d,f){var g={_renderIndex:0,_lastRenderedArray:null,publishRendering:!1,_getLabel:function(){return""},activateRenderer:function(d){},deactivateRenderer:function(d){},runAction:function(d){},delegate:{onDidRenderCollection:function(){}},renderRow:function(d){return d.render?d.render(d,this.inherited):this.inherited(arguments)},renderArray:function(){this._lastRenderedArray=this.inherited(arguments);this._onDidRenderCollection(arguments);return this._lastRenderedArray},_onDidRenderCollection:function(){this._renderIndex++},
didRender:function(){return 0<=this._renderIndex}},k=d("xgrid.Renderer",null,g);k.Implementation=g;return k})},"xgrid/Clipboard":function(){define(["xdojo/declare","xide/types"],function(d,f){var g={runAction:function(d){switch(d.command){case f.ACTION.CLIPBOARD_COPY:return this.clipboardCopy(),this.refreshActions(),!0;case f.ACTION.CLIPBOARD_PASTE:return this.clipboardPaste();case f.ACTION.CLIPBOARD_CUT:return this.clipboardCut(),!0}return this.inherited(arguments)},clipboardPaste:function(){return this.inherited(arguments)},
clipboardCopy:function(){this.currentCutSelection=null;this.currentCopySelection=this.getSelection();this.publish(f.EVENTS.ON_CLIPBOARD_COPY,{selection:this.currentCopySelection,owner:this,type:this.itemType})},clipboardCut:function(){this.currentCopySelection=null;this.currentCutSelection=this.getSelection()},getClipboardActions:function(d){function c(){var b=a.getSelection();return b&&b.length?b[0]?b:(console.error("have no item"),null):null}function b(){switch(this.title){case "Cut":case "Copy":var b;
b=c()?!1:!0;return!1!==b;case "Paste":return null==a.currentCopySelection}return!1}function e(c,e,d,f){l.push(a.createAction({label:c,command:e,icon:d,tab:"Home",group:"Clipboard",keycombo:f,mixin:{addPermission:!0},shouldDisable:b}))}var a=this,l=[];d=f.ACTION;e("Copy",d.CLIPBOARD_COPY,"fa-copy","ctrl c");e("Paste",d.CLIPBOARD_PASTE,"fa-paste","ctrl v");e("Cut",d.CLIPBOARD_CUT,"fa-cut","ctrl x");return l}},k=d("xgrid.Clipboard",null,g);k.Implementation=g;return k})},"xgrid/ThumbRenderer":function(){define(["xdojo/declare",
"xide/types","dojo/dom-construct","./Renderer"],function(d,f,g,k){f={isThumbGrid:!1,_getLabel:function(){return"Thumb"},_getIcon:function(){return"fa-th-large"},activateRenderer:function(d){this._showHeader(!1);this.isThumbGrid=!0},deactivateRenderer:function(d){this.isThumbGrid=!1},renderRow:function(d){return d.render?d.render(d,this.inherited):g.create("span",{className:"fileGridCell",innerHTML:'\x3cspan class\x3d"fa-cube fa-5x""\x3e\x3c/span\x3e \x3cdiv class\x3d"name"\x3e'+d.name+"\x3c/div\x3e",
style:"color:blue;max-width:200px;float:left;margin:18px;padding:18px;"})}};d=d("xgrid.ThumbRenderer",[k],f);d.Implementation=f;return d})},"xgrid/TreeRenderer":function(){define("xdojo/declare ./Renderer dgrid/Tree dojo/keys xide/utils dojo/on".split(" "),function(d,f,g,k,h,c){function b(b){function a(a,b){_.each(a,function(a){(a=d.row(a))&&a.element&&d.expand(a,b,!0)})}this.onTreeKey(b);var d=this;if(!d.isThumbGrid&&(b.keyCode==k.LEFT_ARROW||b.keyCode==k.RIGHT_ARROW||b.keyCode==k.HOME||b.keyCode==
k.END)){var e=b.target;if((!e||-1==e.className.indexOf("InputInner")&&-1==e.className.indexOf("input")&&"text"!==b.target.type)&&(e=this.row(b))&&e.data){var f=e.data,h=this._isExpanded(f),g=this.collection,r=g.getSync(f[g.idProperty]),m=f.getChildren?f.getChildren():r&&r.children?r.children:null,u=!1;null==m&&g.getChildren&&r&&((m=g.getChildren(r))&&m.length?u=!0:m=null);var x=r?r.isDir||r.directory:!1;!x&&u&&m&&(x=!0);var u=m?m[0]:!1,v=this._focusedNode,z=v?this.down(v,m?m.length:0,!0):null,m=!0===
r._EX||null==r._EX,r=this.getSelection?this.getSelection():[r],A=this.down(v,-1,!0),B=this.down(v,1,!0),y={focus:!0,append:!1,delay:1};if(u&&u._reference){var C=g.getSync(u._reference);C&&(u=C)}if(b.keyCode==k.END&&h&&x&&z&&z.element!==v)this.select(z,null,!0,y);else{if(b.keyCode==k.LEFT_ARROW){b.preventDefault();if(f[g.parentField]&&(f=e.data,!h)){f=(g=g.getSync(f[g.parentField]))?this.row(g):null;if(g&&f.element)return this.select([g],null,!0,y);if(A)return this.select(A,null,!0,y);c.emit(this.contentNode,
"keydown",{keyCode:36,force:!0})}e&&(h?a(r,!1):this.select(A,null,!0,y))}if(b.keyCode==k.RIGHT_ARROW){b.preventDefault();if(x&&m&&h&&!u&&B)return this.select(B,null,!0,y);m&&h?u&&this.select([u],null,!0,y):u||!m||x?a(r,!0):B&&this.select(B,null,!0,y)}}}}}h={_getLabel:function(){return"Tree"},_getIcon:function(){return"fa-tree"},deactivateRenderer:function(b){},activateRenderer:function(){this._showHeader(!0)},__getParent:function(b){if(b&&b.getParent){var a=b.getParent();if(a)return this.row(a).element?
this.__getParent(a):a||b}return b},getCurrentFolder:function(){return this.__getParent(this.getRows()[0])},_isExpanded:function(b){return!!this._expanded[this.row(b).id]},onTreeKey:function(){this.inherited(arguments)},startup:function(){if(!this._started){var c=this.inherited(arguments);this.on("keydown",b.bind(this));return c}}};d=d("xgrid.TreeRenderer",[f,g],h);d.Implementation=h;d.KEYBOARD_HANDLER=b;return d})},"xgrid/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-class dojo/on dojo/topic dojo/has dojo/when dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList xgrid/Selection dojo/has!touch?../util/touch".split(" "),
function(d,f,g,k,h,c,b,e,a,l,p,q,n,w){var r=d(l,{grid:null,getObject:function(a){var b=this.grid;return b._trackError(function(){return b.collection.get(a.id.slice(b.id.length+5))})},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},onDrop:function(b,c,d){var e=this,f=this._targetAnchor=this.targetAnchor,l=this.grid,m=l.collection;!this.before&&f&&(f=f.nextSibling);f=f&&l.row(f);a(f&&m.get(f.id),function(a){if(e!==b)e.onDropExternal(b,c,d,a);else e.onDropInternal(c,
d,a)})},onDropInternal:function(b,c,d){var e=this.grid,f=e.collection,l=this,m=l._targetAnchor,g;m&&(g=this.before?m.previousSibling:m.nextSibling);m=e.row(b[0]);(c||g!==b[0]&&(d||!m||e.down(m).element!==b[0]))&&b.forEach(function(b){a(l.getObject(b),function(a){var b=f.getIdentity(a);e._trackError(function(){return f[c&&f.copy?"copy":"put"](a,{beforeId:d?f.getIdentity(d):null}).then(function(){l._selectedNodes[b]&&(l._selectedNodes[b]=e.row(b).element)})})})})},onDropExternal:function(b,c,d,e){var f=
this.grid,l=this.grid.collection,m=b.grid;c.forEach(function(c,g){a(b.getObject(c),function(a){f._trackError(function(){return l[l.copy?"copy":"put"](a,{beforeId:e?l.getIdentity(e):null}).then(function(){if(!d){if(m){var e=m.collection.getIdentity(a);!g&&b.selectNone();b.delItem(c.id);return m.collection.remove(e)}b.deleteSelectedNodes()}})})})})},onDndStart:function(a){this.inherited(arguments);a===this&&(p.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(a){e("touch")&&
this.isDragging&&1<w.countCurrentTouches(a,this.grid.touchNode)?(b.publish("/dnd/cancel"),p.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!e("touch")||1>=w.countCurrentTouches(a,this.grid.touchNode))&&this.inherited(arguments)},checkAcceptance:function(a){return a.getObject&&l.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new q,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);
return a}});d=d(n,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:r,postMixInProperties:function(){this.inherited(arguments);this.dndParams=f.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(a){e[a.id]=a.element}function b(a){delete e[a.id];h.remove(a.element,"dojoDndItemSelected dojoDndItemAnchor")}this.inherited(arguments);var c=this.dndConstructor||r,d=f.mixin(this.dndParams,{grid:this,dropParent:this.contentNode});"function"===typeof this.expand&&
(d.allowNested=!0);this.dndSource=new c(this.bodyNode,d);var e=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){g.forEach(b.rows,a)});this.on("dgrid-deselect",function(a){g.forEach(a.rows,b)});k.after(this,"destroy",function(){delete this.dndSource._selectedNodes;e=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"===typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];h.add(b,"dojoDndItem");this.dndSource.setItem(b.id,
{data:a,type:c instanceof Array?c:[c]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});d.GridSource=r;return d})},"xgrid/Grid":function(){define(["dojo/_base/declare","xide/types","./Base"],function(d,f,g){d=d("xgrid/Grid",g,{});d.createGridClass=g.createGridClass;d.classFactory=g.classFactory;d.DEFAULT_GRID_FEATURES=f.DEFAULT_GRID_FEATURES;d.DEFAULT_GRID_BASES=g.DEFAULT_GRID_BASES;d.DEFAULT_GRID_OPTIONS=f.DEFAULT_GRID_OPTIONS;d.DEFAULT_GRID_OPTION_KEYS=
f.DEFAULT_GRID_OPTION_KEYS;return d})},"xgrid/KeyboardNavigation":function(){define(["xdojo/declare","dojo/keys","dojo/_base/lang","dojo/on","xide/utils"],function(d,f,g,k,h){var c=g.hitch;return d("xgrid/KeyboardNavigation",null,{childSelector:".dgrid-row",defer:function(b,d){var a=setTimeout(c(this,function(){a=null;this._destroyed||c(this,b)()}),d||0);return{remove:function(){a&&(clearTimeout(a),a=null);return null}}},buildRendering:function(){this.inherited(arguments);if(!this._keyNavCodes){var b=
this._keyNavCodes={};b[f.UP_ARROW]=c(this,"_onUpArrow");b[f.DOWN_ARROW]=c(this,"_onDownArrow")}"string"==typeof this.childSelector||c(this,"childSelector");b=this.domNode;this.__on(b,"keypress",null,c(this,"_onContainerKeypress"));this.__on(b,"keydown",null,c(this,"_onContainerKeydown"))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},___focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,
1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(b,c,a,d){b&&(this.deselectAll(),this.select([this.row(b).data],null,!0,{focus:!0,delay:10,append:!0}))},getSearchableText:function(b){return b.message||b.name||""},_keyboardSearchCompare:function(b,c){if(b&&!b.data){var a=this.row(b);a&&(b.data=a.data)}if(a=b?b.data?this.getSearchableText(b.data):"":""){var a=a.toLowerCase(),d=a.replace(/^\s+/,"").substr(0,
c.length).toLowerCase(),d=c.length&&d==c?-1:0,a=-1!=a.replace(/^\s+/,"").indexOf(c.toLowerCase());return 0==d&&1<c.length&&a?1:d}},_onContainerKeydown:function(b){if(!b.target||-1==b.target.className.indexOf("input")){var c=this._keyNavCodes[b.keyCode];c?(c(b,this.focusedChild),b.stopPropagation(),b.preventDefault(),this._searchString=""):b.keyCode!=f.SPACE||!this._searchTimer||b.ctrlKey||b.altKey||b.metaKey||(b.stopImmediatePropagation(),b.preventDefault(),k.emit(this.domNode,"keypress",{charCode:f.SPACE,
cancelable:!0,bubbles:!0}))}},_onContainerKeypress:function(b){if(!(this.editing||b.target&&-1!=b.target.className.indexOf("input")||32>b.charCode||b.ctrlKey||b.altKey)){var d=null,a,f=0,g=c(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=h;var b=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;a=this._searchString.substr(0,b);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var c=this.focusedChildNode||
this.focusedChild||null;if(1==b||!c)if(c=this._getNextFocusableChild(c,1),!c)return;b=c;do{var e=this._keyboardSearchCompare(c,a);e&&0==f++&&(d=c);if(-1==e){f=-1;break}c=this._getNextFocusableChild(c,1)}while(c!=b)}),h=String.fromCharCode(b.charCode).toLowerCase();b.preventDefault();b.stopPropagation();g();this.onKeyboardSearch(d,b,a,f)}},_onChildBlur:function(){},_getNextFocusableChild:function(b,c){var a=b;do{if(b){if(b&&b.node){var d=h.find(".dgrid-cell",b.node,!0);d&&(b=d)}b=this._getNext(b,c)}else if(b=
this[0<c?"_getFirst":"_getLast"](),!b)break;if(null!=b&&b!=a)return b}while(b!=a)},_getFirst:function(){var b=h.find(".dgrid-row",this.domNode,!0);if(b){var c=h.find(".dgrid-cell",b,!0);if(c)return c}return b},_getLast:function(){var b=h.find(".dgrid-row",this.domNode,!1);return b&&(b=h.find(".dgrid-cell",b,!0))?b:null},_getPrev:function(b,c){if(b){var a=this.up(b,1,!0);if(a){var d=null;a.data&&(d=a.data);a.element&&(a=a.element);var e=h.find(".dgrid-cell",a,!0);return e?(e.data||(e.data=d),e):a}}},
_getNext:function(b,c){if(b){var a=this.down(b,1,!0);if(a){a.element&&(a=a.element);var d=h.find(".dgrid-cell",a,!0);return d?d:a}}}})})},"xgrid/MultiRenderer":function(){define(["xdojo/declare","xide/types","xgrid/Renderer"],function(d,f,g){function k(c,b){h[b]=function(){var c=this.getSelectedRenderer();return c[b]?c[b].apply(this,arguments):this.inherited(arguments)}}var h={renderers:null,selectedRenderer:null,lastRenderer:null,rendererActionRootCommand:"View/Layout",runAction:function(c){c=this.getAction(c);
if(-1!=c.command.indexOf(this.rendererActionRootCommand)){var b=c.getParent?c.getParent():null;c._originEvent="change";this.setRenderer(c.value);b&&(b.set("icon",c.get("icon")),b=b.getChildren(),_.each(b,function(b){b._oldIcon&&b.set("icon",b._oldIcon)}));c.set&&c.set("icon","fa-check");return!0}return this.inherited(arguments)},setState:function(c){var b=dojo.getObject(c.selectedRenderer);b&&(this.setRenderer(b),this.set("collection",this.collection.getDefaultCollection()));return this.inherited(arguments)},
getState:function(c){c=this.inherited(arguments)||{};this.selectedRenderer&&(c.selectedRenderer=this.getSelectedRenderer.declaredClass);return c},getRendererActions:function(c,b){function d(b,c,d){var e="shift f"+k;k++;var h=null,h=l.createAction({label:b,command:a+"/"+b,icon:c,tab:"View",group:"Layout",mixin:{value:d,addPermission:!0,closeOnClick:!1},keycombo:[e],onCreate:function(a){a._oldIcon=c;a.actionType=f.ACTION_TYPE.SINGLE_TOGGLE;a.set("value",d)}});g.push(h);return g}var a=this.rendererActionRootCommand,
l=this,g=[],h=c||this.getRenderers(),n=f.ACTION_VISIBILITY,k=1;g.push(this.createAction({label:"Layout",command:a,icon:"fa-laptop",tab:"View",group:"Layout",mixin:{closeOnClick:!1},onCreate:function(a){a.set("value",l.selectedRenderer);a.setVisibility(n.ACTION_TOOLBAR,!1)}}));_.each(h,function(a){var b=a.Implementation||a.prototype;b._getLabel&&d(b._getLabel(),b._getIcon(),a)});return g},getSelectedRenderer:function(){return this.selectedRenderer.prototype},startup:function(){var c=this;this._on("onAddGridActions",
function(b){c.getRendererActions(c.getRenderers(),b.actions).forEach(function(c){b.actions.push(c)})});this.inherited(arguments);this.selectedRenderer&&$(this.domNode).addClass(this.getSelectedRenderer()._getLabel())},getRenderers:function(){return this.renderers},setRenderer:function(c,b){var d=this,a=d.getSelection(),g=d.getFocused(),h=d.getSelectedRenderer(),k={"new":c,old:d.selectedRenderer},n=$(this.domNode);n.removeClass(h._getLabel());h.deactivateRenderer.apply(this,k);this._emit("onChangeRenderer",
k);this.lastRenderer=this.selectedRenderer;this.selectedRenderer=c;this.selectedRendererClass=c.prototype.declaredClass;n.addClass(c.prototype._getLabel());c.prototype.activateRenderer.apply(this,k);this.collection.reset();(h=this.refresh())&&h.then&&h.then(function(){d._emit("onChangedRenderer",k);!1!==b&&(g&&d.focus(d.row(g)),d.select(a,null,!0,{silent:!0,append:!1,focus:!0}));d.publish(f.EVENTS.RESIZE,{view:d})});return h}};_.each("row removeRow renderRow insertRow activateRenderer deactivateRenderer".split(" "),
function(c){k(h,c)});d=d("xgrid.MultiRenderer",null,h);d.Implementation=h;return d})},"xgrid/Search":function(){define(["xdojo/declare","xide/widgets/_Search","dojo/on","xide/Keyboard","xide/types"],function(d,f,g,k,h){return d("xgrid/Search",null,{_searchText:null,_search:null,runAction:function(c){c&&c.command==h.ACTION.SEARCH&&this._search&&(this._search.isHidden()?this._search.show("",!1):this._search.hide());return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);
var c=this,b=c.domNode.parentNode,d=new f({});d.find=function(){c._searchText=this.searchInput.value;c.set("collection",c.collection)};d.showSearchBox(b);d.show("",!1);d.hide();this._search=d;g(d.searchInput,"keydown",function(a){"Escape"===a.code&&(d.hide(),c.focus())});var a=k.defaultMapping(["ctrl f"],function(){d.show("",!1)},h.KEYBOARD_PROFILE.DEFAULT,c.domNode,c,null);this.registerKeyboardMapping(a);this._on("onAddActions",function(a){var d=a.actions,e=a.permissions;action=h.ACTION.SEARCH;a.store.getSync(action)||
(a=c.createAction("Search",action,h.ACTION_ICON.SEARCH,["ctrl f"],"Home","File","item|view",null,null,null,null,null,e,b,c))&&d.push(a)})},_setCollection:function(c){var b=this.inherited(arguments),d=this._searchText,a=this._renderedCollection;if(a&&d){var f=new a.Filter,d=new RegExp(d,"i"),g=this.columns,h=[],k;for(k in g)g.hasOwnProperty(k)&&h.push(f.match(g[k].searchText||g[k].field,d));f=f.or.apply(f,h);this._renderedCollection=a.filter(f);this.refresh()}return b}})})},"xgrid/component":function(){define(["dojo/_base/declare",
"xide/model/Component"],function(d,f){return d("xfile.component",f,{beanType:"",getDependencies:function(){return[]},getLabel:function(){return"xgrid"},getBeanType:function(){return this.beanType}})})},"xgrid/Noob":function(){define(["dojo/_base/declare"],function(d){return d("xgrid.Noob",null,{})})}}});define("xgrid/xgrid",[],function(){return null});
//# sourceMappingURL=xgrid.js.map